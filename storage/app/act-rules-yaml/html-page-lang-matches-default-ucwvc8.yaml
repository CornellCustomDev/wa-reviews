machine_name: html-page-lang-matches-default-ucwvc8
id: ucwvc8
name: 'HTML page language subtag matches default language'
metadata:
    id: ucwvc8
    name: 'HTML page language subtag matches default language'
    rule_type: atomic
    description: "This rule checks that the primary language subtag of the page language matches the default language of the page\n"
    accessibility_requirements: { 'wcag20:3.1.1': { forConformance: true, failed: 'not satisfied', passed: satisfied, inapplicable: 'further testing needed' }, 'wcag-technique:H57': { forConformance: false, failed: 'not satisfied', passed: satisfied, inapplicable: satisfied } }
    input_aspects: ['DOM tree', 'Accessibility tree', 'CSS Styling', Language]
    acknowledgments: { authors: ['Wilco Fiers'], funding: [WAI-Tools] }
    htmlHintIgnore: [alt-require]
applicability: "This rule applies to any document element if it is an `html` element for which all of the following are true:\n\n- The document element has a `lang` attribute with a value that has a known primary language tag; and\n- The document element is in a top-level browsing context; and\n- The document element has a content type of `text/html`; and\n- The document element has a defined default page language."
assumptions: "- This rule assumes that the default human language of a page, as described in WCAG 2, can be determined by counting the number of words used in each language. If the default language needs to be derived in some other way (such as frequency analysis, mutual information based distance, …), this rule may fail while [Success Criterion 3.1.1: Language of Page](https://www.w3.org/TR/WCAG22/#language-of-page) is still satisfied.\n\n- The language of the page can be set by other methods than the `lang` attribute, for example using HTTP headers or the `meta` element. These methods are not supported by all assistive technologies. This rule assumes that these other methods are insufficient to satisfying [Success Criterion 3.1.1: Language of Page](https://www.w3.org/TR/WCAG22/#language-of-page).\n\n- This rule assumes that user agents and assistive technologies can programmatically determine known primary language tags even if these do not conform to the RFC 5646 syntax.\n\n- This rule assumes that only known primary language tags are enough to satisfy Success Criterion 3.1.1 Language of Page; this notably excludes grandfathered tags and ISO 639.2 three-letters codes, both having poor support in assistive technologies.\n\n- This rule assumes that `iframe` title elements are not exposed to assistive technologies and so does not consider them as part of the default page language."
accessibility_support: 'There are no accessibility support issues known.'
background: "### Related rules\n\n- [HTML page has `lang` attribute](https://www.w3.org/WAI/standards-guidelines/act/rules/b5c3f8/)\n- [HTML page `lang` attribute has valid language tag](https://www.w3.org/WAI/standards-guidelines/act/rules/bf051a/)\n\n### Bibliography\n\n- [Understanding Success Criterion 3.1.1: Language of Page](https://www.w3.org/WAI/WCAG22/Understanding/language-of-page.html)\n- [H57: Using language attributes on the html element](https://www.w3.org/WAI/WCAG22/Techniques/html/H57)\n- [RFC 5646: Tags for Identifying Languages](https://www.rfc-editor.org/rfc/rfc5646.html)\n- [The `lang` and `xml:lang` attributes](https://html.spec.whatwg.org/multipage/dom.html#the-lang-and-xml:lang-attributes)"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This page has a `lang` attribute value of `en` (English), which matches the default language of the page. The default language is English because all words are English.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>ACT Rules Format 1.0 - Abstract</title>\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tThe Accessibility Conformance Testing (ACT) Rules Format 1.0 defines a format for writing accessibility test\n\t\t\trules. These test rules can be used for developing automated testing tools and manual testing methodologies. It\n\t\t\tprovides a common format that allows any party involved in accessibility testing to document and share their\n\t\t\ttesting procedures in a robust and understandable manner. This enables transparency and harmonization of testing\n\t\t\tmethods, including methods implemented by accessibility test tools.\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Passed Example 2', description: 'This page has a `lang` attribute value of `en` (English), which matches the default language of the page. The default language is English because all but a few words are English.', html: "<html lang=\"EN\">\n\t<head>\n\t\t<title>Gelukkig</title>\n\t</head>\n\t<body>\n\t\t<p>The Dutch word \"gelukkig\" has no equivalent in English.</p>\n\t</body>\n</html>" }, { name: 'Passed Example 3', description: 'This page has `lang` attribute value of `nl` (Dutch), which matches the default language of the page. The default language is Dutch because all English words are in a `p` element with a `lang` attribute value of `en`.', html: "<html lang=\"nl\">\n\t<head>\n\t\t<title>Met de kippen op stok</title>\n\t</head>\n\t<body>\n\t\t<blockquote>\n\t\t\t<p>\"Hij ging met de kippen op stok\"</p>\n\t\t</blockquote>\n\t\t<p lang=\"en\">\n\t\t\tThis Dutch phrase literally translates into \"He went to roost with the chickens\", but it means that he went to bed\n\t\t\tearly.\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Passed Example 4', description: 'This page has a `lang` attribute value of `en` (English), which matches the default language of the page. The default language is English because the accessible texts are English, and all other text is in a `p` element with a `lang` attribute value of `nl`.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>Fireworks over Paris</title>\n\t</head>\n\t<body>\n\t\t<img src=\"/test-assets/shared/fireworks.jpg\" alt=\"Fireworks over Paris\" />\n\t\t<p lang=\"nl\">\n\t\t\tGelukkig nieuwjaar!\n\t\t</p>\n\t</body>\n</html>" }]
    failed: [{ name: 'Failed Example 1', description: 'This page has a `lang` attribute value of `da` (Danish), which does not match the default language of the page. The default language is English because all words are English.', html: "<html lang=\"da\">\n\t<head>\n\t\t<title>ACT Rules Format 1.0 - Abstract</title>\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tThe Accessibility Conformance Testing (ACT) Rules Format 1.0 defines a format for writing accessibility test\n\t\t\trules. These test rules can be used for developing automated testing tools and manual testing methodologies. It\n\t\t\tprovides a common format that allows any party involved in accessibility testing to document and share their\n\t\t\ttesting procedures in a robust and understandable manner. This enables transparency and harmonization of testing\n\t\t\tmethods, including methods implemented by accessibility test tools.\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Failed Example 2', description: 'This page has a `lang` attribute value of `nl` (Dutch), which does not match the default language of the page. The default language is English because all but a few words are English.', html: "<html lang=\"nl\">\n\t<head>\n\t\t<title>Gelukkig</title>\n\t</head>\n\t<body>\n\t\t<p>The Dutch word \"gelukkig\" has no equivalent in English.</p>\n\t</body>\n</html>" }, { name: 'Failed Example 3', description: 'This page has a `lang` attribute value of `en` (English), which does not match the default language of the page. The default language is Dutch because all English words are in a `p` element with a `lang` attribute value of `en`.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>Met de kippen op stok</title>\n\t</head>\n\t<body>\n\t\t<blockquote>\n\t\t\t<p>\"Hij ging met de kippen op stok\"</p>\n\t\t</blockquote>\n\t\t<p lang=\"en\">\n\t\t\tThis Dutch phrase literally translates into \"He went to roost with the chickens\", but it means that he went to bed\n\t\t\tearly.\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Failed Example 4', description: 'This page has a `lang` attribute value of `nl` (Dutch), which does not match the default language of the page. The default language is English because the accessible texts are English, and all other text is in a `p` element with a `lang` attribute value of `nl`.', html: "<html lang=\"nl\">\n\t<head>\n\t\t<title>Fireworks over Paris</title>\n\t</head>\n\t<body>\n\t\t<img src=\"/test-assets/shared/fireworks.jpg\" alt=\"Fireworks over Paris\" />\n\t\t<p lang=\"nl\">\n\t\t\tGelukkig nieuwjaar!\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Failed Example 5', description: 'This page has a `lang` attribute value of `nl` (Dutch), which does not match the default language of the page. The default language is English because the accessible name of the `img` element is English. The `lang` attribute on the `p` element is effectively ignored.', html: "<html lang=\"nl\">\n\t<head>\n\t\t<title>Paris</title>\n\t</head>\n\t<body>\n\t\t<img src=\"/test-assets/shared/fireworks.jpg\" aria-labelledby=\"caption\" />\n\t\t<p lang=\"en\" id=\"caption\" hidden>\n\t\t\tFireworks over Paris!\n\t\t</p>\n\t</body>\n</html>" }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: "This is an SVG document, not an HTML document.\n\n```svg\n<svg xmlns=\"http://www.w3.org/2000/svg\" lang=\"fr\"></svg>\n```\n\n#### Inapplicable Example 2\n\nThis page has an undefined default language because it has no content or document title.", html: '<html></html>' }, { name: 'Inapplicable Example 3', description: 'This page has an undefined default language because it has no document title and all its content is wrapped in an element with a `lang` attribute.', html: "<html>\n\t<p lang=\"en\">\n\t\tThe Accessibility Conformance Testing (ACT) Rules Format 1.0 defines a format for writing accessibility test rules.\n\t\tThese test rules can be used for developing automated testing tools and manual testing methodologies. It provides a\n\t\tcommon format that allows any party involved in accessibility testing to document and share their testing procedures\n\t\tin a robust and understandable manner. This enables transparency and harmonization of testing methods, including\n\t\tmethods implemented by accessibility test tools.\n\t</p>\n</html>" }, { name: 'Inapplicable Example 4', description: 'This page has an undefined default language because it can either be English or French.', html: "<html lang=\"fr\">\n\t<head>\n\t\t<title>Paul put dire comment on tape</title>\n\t</head>\n\t<body>\n\t\t<p>Paul put dire comment on tape</p>\n\t</body>\n</html>" }, { name: 'Inapplicable Example 5', description: 'The `lang` attribute value of this page is an iso 639.2 three letters code, hence has no known primary language tag.', html: "<html lang=\"eng\">\n\t<body>\n\t\t<p lang=\"en\">I love ACT rules!</p>\n\t</body>\n</html>" }, { name: 'Inapplicable Example 6', description: 'The `lang` attribute value of this page is a grandfathered tag, hence has no known primary language tag.', html: "<html lang=\"i-lux\">\n\t<body>\n\t\t<p lang=\"lb\">Lëtzebuerg ass e Land an Europa.</p>\n\t</body>\n</html>" }]
expectation: 'For each test target, the known primary language tag of its `lang` attribute matches the default page language of the test target.'
