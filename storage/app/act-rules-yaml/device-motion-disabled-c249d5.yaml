id: c249d5
name: 'Device motion based changes to the content can be disabled'
metadata:
    id: c249d5
    name: 'Device motion based changes to the content can be disabled'
    rule_type: atomic
    description: "This rule checks that it is possible to disable any changes to the content of the web page resulting from device motion based events.\n"
    accessibility_requirements: { 'wcag21:2.5.4': { forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['DOM Tree', 'CSS Styling', 'Accessibility tree']
    acknowledgments: { authors: ['Carlos Duarte', 'Jo√£o Vicente'], funding: [WAI-Tools] }
    htmlHintIgnore: [attr-lowercase]
applicability: 'This rule applies to an HTML document with an associated Window object that has an event listener list with one or more event listeners for device orientation events or device motion events.'
assumptions: "- The motion to operate the device is not used through an accessibility supported interface, which is listed as a valid exception to Success Criterion 2.5.4: Motion Actuation.\n- The motion is not essential for the functionality it triggers, which is listed as a valid exception to Success Criterion 2.5.4: Motion Actuation.\n- The event listeners listening to device motion events trigger a functionality in the web page. If they do not trigger any such functionality failing this rule might not be a failure of the success criterion.\n- If there are ways to disable the device motion based functionality that do not require the user to interact with the web page (e.g. a setting at the operating system level), failing this rule might not be a failure of the success criterion.\n- This rule assumes that there are no changes in the content of the web page caused by another event. If this is not the case, changes may be attributed to the wrong event and the rule may fail while Success Criterion 2.5.4: Motion Actuation is still satisfied.\n- This rule assumes that the changes happen within a 1 minute time span after the event firing and therefore the comparison between the page before and after the event firing can be made at any time after that time span elapses. If there are changes after this time span, they may not be detected as changes in content and the rule may pass but Success Criterion 2.5.4: Motion Actuation is not satisfied. The arbitrary 1 minute time span, selected so that testing this rule would not be impractical, is not included in WCAG.\n- After being disabled, the event remains disabled until being re-enabled again. If the event is re-enabled through other non-user controlled means (e.g. a timeout) then this rule may pass while Success Criterion 2.5.4: Motion Actuation is not satisfied."
accessibility_support: 'There are no accessibility support issues known.'
background: "The instruments used to pass this rule (if any), must meet all level A Success Criteria in order to fully satisfy Success Criterion 2.5.4: Motion Actuation. These extra requirements are left out of this rule, and should be tested separately.\n\n### Bibliography\n\n- Understanding Success Criterion 2.5.4: Motion Actuation\n- [G213: Provide conventional controls and an application setting for motion activated input](https://www.w3.org/WAI/WCAG22/Techniques/general/G213.html)\n- [DeviceOrientation Event Specification](https://www.w3.org/TR/orientation-event/)"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This HTML document has device orientation events that cause **no changes** to the content of the web page.', html: "<html>\n\t<head>\n\t\t<title>Passed Example 1</title>\n\t\t<script>\n\t\t\tfunction activateEvent() {\n\t\t\t\tlet counter = 0\n\t\t\t\twindow.addEventListener('deviceorientation', () => {\n\t\t\t\t\tcounter++\n\t\t\t\t})\n\t\t\t}\n\t\t</script>\n\t</head>\n\n\t<body onload=\"activateEvent();\">\n\t\t<p>ACT-R</p>\n\t\t<p>Note: This example may not work across all browsers.</p>\n\t</body>\n</html>" }, { name: 'Passed Example 2', description: "This HTML document that can be operated through the device's orientation to increase and decrease the value of a slider has a control to **disable** that functionality.", html: "<html>\n\t<head>\n\t\t<title>Passed Example 2</title>\n\t\t<script src=\"/test-assets/7677a9/slider.js\"></script>\n\t\t<script>\n\t\t\tfunction activateSlider() {\n\t\t\t\twindow.addEventListener('deviceorientation', handleOrientationCanBeDisabled)\n\t\t\t}\n\t\t</script>\n\t</head>\n\n\t<body onload=\"activateSlider();\">\n\t\t<h1>Slider Motion Sensor Example</h1>\n\n\t\t<p>\n\t\t\tOpen this slider on a device with a motion sensor, such as a smartphone or tablet. Tilt the device to the right\n\t\t\tand left to adjust the slider value. The check box disables the motion sensing adjustment.\n\t\t</p>\n\t\t<p>Note: This example may not work across all browsers.</p>\n\n\t\t<div>\n\t\t\t<input type=\"range\" min=\"1\" max=\"100\" value=\"50\" id=\"motionSlider\" disabled />\n\t\t\t<p aria-live=\"polite\">Slider Value: <span id=\"output\">50</span></p>\n\t\t</div>\n\t\t<div>\n\t\t\t<input type=\"checkbox\" id=\"disableMotion\" />\n\t\t\t<label for=\"disableMotion\">Disable Motion Actuation</label>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 3', description: 'This HTML document that can be operated by rotating the device to increase and decrease the value of a slider has a control to **disable** that functionality.', html: "<html>\n\t<head>\n\t\t<title>Passed Example 3</title>\n\t\t<script src=\"/test-assets/7677a9/slider.js\"></script>\n\t\t<script>\n\t\t\tfunction activateSlider() {\n\t\t\t\twindow.addEventListener('devicemotion', handleMotionCanBeDisabled)\n\t\t\t}\n\t\t</script>\n\t</head>\n\n\t<body onload=\"activateSlider();\">\n\t\t<h1>Slider Motion Sensor Example</h1>\n\n\t\t<p>\n\t\t\tOpen this slider on a device with a motion sensor, such as a smart phone or tablet. Rotate the device to adjust\n\t\t\tthe slider value. The check box disables the motion sensing adjustment.\n\t\t</p>\n\t\t<p>Note: This example may not work across all browsers.</p>\n\n\t\t<div>\n\t\t\t<input type=\"range\" min=\"1\" max=\"100\" value=\"50\" id=\"motionSlider\" disabled />\n\t\t\t<p aria-live=\"polite\">Slider Value: <span id=\"output\">50</span></p>\n\t\t</div>\n\t\t<div>\n\t\t\t<input type=\"checkbox\" id=\"disableMotion\" />\n\t\t\t<label for=\"disableMotion\">Disable Motion Actuation</label>\n\t\t</div>\n\t</body>\n</html>" }]
    failed: [{ name: 'Failed Example 1', description: "This HTML document that can be operated through the device's orientation to increase and decrease the value of a slider but has no way to **disable** this functionality.", html: "<html>\n\t<head>\n\t\t<title>Failed Example 1</title>\n\t\t<script src=\"/test-assets/7677a9/slider.js\"></script>\n\t\t<script>\n\t\t\tfunction activateSlider() {\n\t\t\t\twindow.addEventListener('deviceorientation', handleOrientation)\n\t\t\t}\n\t\t</script>\n\t</head>\n\n\t<body onload=\"activateSlider();\">\n\t\t<pre class=\"output\"></pre>\n\n\t\t<h1>Slider Motion Sensor Example</h1>\n\n\t\t<p>\n\t\t\tOpen this slider on a device with a motion sensor, such as a smartphone or tablet. Tilt the device to the right\n\t\t\tand left to adjust the slider value.\n\t\t</p>\n\t\t<p>Note: This example may not work across all browsers.</p>\n\n\t\t<div>\n\t\t\t<input type=\"range\" min=\"1\" max=\"100\" value=\"50\" id=\"motionSlider\" disabled />\n\t\t\t<button id=\"increaseSlider\" type=\"button\">Increase Value</button>\n\t\t\t<p aria-live=\"polite\">Slider Value: <span id=\"output\">50</span></p>\n\t\t</div>\n\t</body>\n</html>" }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: 'This HTML document is not operable by device motion.', html: '<p>ACT-Rules</p>' }]
expectation: "For each registered device orientation event or device motion event in the test target at least one of the following is true:\n\n- **no changes:** The registered event does not cause changes to the content of the web page within a 1 minute time span of the event firing; or\n- **disabled:** There is at least one set of clearly labeled instruments to block the event[] for at least 1 minute."
