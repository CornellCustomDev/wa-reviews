id: 7677a9
name: 'Device motion based changes to the content can also be created from the user interface'
metadata:
    id: 7677a9
    name: 'Device motion based changes to the content can also be created from the user interface'
    rule_type: atomic
    description: "This rule checks that changes to the content of a web page that result from device motion events can also be caused by user interface components.\n"
    accessibility_requirements: { 'wcag21:2.5.4': { forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['DOM Tree', 'CSS Styling', 'Accessibility tree']
    acknowledgments: { authors: ['Carlos Duarte', 'Jo√£o Vicente'], funding: [WAI-Tools] }
    htmlHintIgnore: [attr-lowercase]
applicability: 'This rule applies to any HTML document with an associated Window object that has an event listener list with one or more event listeners for device orientation events or device motion events.'
assumptions: "- The motion to operate the device is not used through an accessibility supported interface, which is listed as a valid exception to Success Criterion 2.5.4: Motion Actuation.\n- The motion is not essential for the functionality it triggers, which is listed as a valid exception to Success Criterion 2.5.4: Motion Actuation.\n- This rule assumes that there are no changes in the content of the web page caused by another event. If this is not the case, changes may be attributed to the wrong event and the rule may fail while Success Criterion 2.5.4: Motion Actuation is still satisfied.\n- This rule assumes that the changes happen within a 1 minute time span after the event firing and therefore the comparison between the page before and after the event firing can be made at any time after that time span elapses. If there are changes after this time span, they may not be detected as changes in content and the rule may pass but Success Criterion 2.5.4: Motion Actuation is not satisfied. The arbitrary 1 minute time span, selected so that testing this rule would not be impractical, is not included in WCAG."
accessibility_support: 'There are no accessibility support issues known.'
background: "The instruments used to pass this rule (if any), must meet all level A Success Criteria in order to fully satisfy Success Criterion 2.5.4: Motion Actuation. These extra requirements are left out of this rule, and should be tested separately.\n\n### Bibliography\n\n- Understanding Success Criterion 2.5.4: Motion Actuation\n- [G213: Provide conventional controls and an application setting for motion activated input](https://www.w3.org/WAI/WCAG22/Techniques/general/G213.html)\n- [DeviceOrientation Event Specification](https://www.w3.org/TR/orientation-event/)"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This HTML document has device orientation events that cause **no changes** to the content of the web page.', html: "<html>\n\t<head>\n\t\t<title>Passed Example 1</title>\n\t\t<script>\n\t\t\tfunction activateEvent() {\n\t\t\t\tlet counter = 0\n\t\t\t\twindow.addEventListener('deviceorientation', () => {\n\t\t\t\t\tcounter++\n\t\t\t\t})\n\t\t\t}\n\t\t</script>\n\t</head>\n\n\t<body onload=\"activateEvent();\">\n\t\t<p>ACT-R</p>\n\t\t<p>Note: This example may not work across all browsers.</p>\n\t</body>\n</html>" }, { name: 'Passed Example 2', description: "This HTML document that can be operated through the device's orientation to increase and decrease the value of a slider has the **same result** available through `button` elements.", html: "<html>\n\t<head>\n\t\t<title>Passed Example 2</title>\n\t\t<script src=\"/test-assets/7677a9/slider.js\"></script>\n\t\t<script>\n\t\t\tfunction activateSlider() {\n\t\t\t\tdocument.getElementById('decreaseSlider').addEventListener('click', decreaseSlider)\n\t\t\t\tdocument.getElementById('increaseSlider').addEventListener('click', increaseSlider)\n\t\t\t\twindow.addEventListener('deviceorientation', handleOrientation)\n\t\t\t}\n\t\t</script>\n\t</head>\n\n\t<body onload=\"activateSlider();\">\n\t\t<pre class=\"output\"></pre>\n\n\t\t<h1>Slider Motion Sensor Example</h1>\n\n\t\t<p>\n\t\t\tOpen this slider on a device with a motion sensor, such as a smart phone or tablet. Tilt the device to the right\n\t\t\tand left to adjust the slider value. The decrease and increase buttons also adjust the value.\n\t\t</p>\n\t\t<p>Note: This example may not work across all browsers.</p>\n\n\t\t<div>\n\t\t\t<button id=\"decreaseSlider\" type=\"button\">Decrease Value</button>\n\t\t\t<input type=\"range\" min=\"1\" max=\"100\" value=\"50\" id=\"motionSlider\" disabled />\n\t\t\t<button id=\"increaseSlider\" type=\"button\">Increase Value</button>\n\t\t\t<p aria-live=\"polite\">Slider Value: <span id=\"output\">50</span></p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 3', description: 'This HTML document that can be operated by rotating the device to increase and decrease the value of a slider has the **same result** available through `button` elements.', html: "<html>\n\t<head>\n\t\t<title>Passed Example 3</title>\n\t\t<script src=\"/test-assets/7677a9/slider.js\"></script>\n\t\t<script>\n\t\t\tfunction activateSlider() {\n\t\t\t\tdocument.getElementById('decreaseSlider').addEventListener('click', decreaseSlider)\n\t\t\t\tdocument.getElementById('increaseSlider').addEventListener('click', increaseSlider)\n\t\t\t\twindow.addEventListener('devicemotion', handleMotion)\n\t\t\t}\n\t\t</script>\n\t</head>\n\n\t<body onload=\"activateSlider();\">\n\t\t<pre class=\"output\"></pre>\n\n\t\t<h1>Slider Motion Sensor Example</h1>\n\n\t\t<p>\n\t\t\tOpen this slider on a device with a motion sensor, such as a smart phone or tablet. Rotate the device to adjust\n\t\t\tthe slider value. The decrease and increase buttons also adjust the value.\n\t\t</p>\n\t\t<p>Note: This example may not work across all browsers.</p>\n\n\t\t<div>\n\t\t\t<button id=\"decreaseSlider\" type=\"button\">Decrease Value</button>\n\t\t\t<input type=\"range\" min=\"1\" max=\"100\" value=\"50\" id=\"motionSlider\" disabled />\n\t\t\t<button id=\"increaseSlider\" type=\"button\">Increase Value</button>\n\t\t\t<p aria-live=\"polite\">Slider Value: <span id=\"output\">50</span></p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 4', description: 'This HTML document can be operated by rotating the device to increase and decrease the value of a slider and the location of an instrument to support the **same results** is clearly available.', html: "<html>\n\t<head>\n\t\t<title>Passed Example 4</title>\n\t\t<script src=\"/test-assets/7677a9/slider.js\"></script>\n\t\t<script>\n\t\t\tfunction activateSlider() {\n\t\t\t\tdocument.getElementById('decreaseSlider').addEventListener('click', decreaseSlider)\n\t\t\t\tdocument.getElementById('increaseSlider').addEventListener('click', increaseSlider)\n\t\t\t\twindow.addEventListener('devicemotion', handleMotion)\n\t\t\t}\n\t\t\tfunction openModal() {\n\t\t\t\tdocument.getElementById('overlay').style.display = 'block'\n\t\t\t}\n\t\t\tfunction closeModal() {\n\t\t\t\tdocument.getElementById('overlay').style.display = 'none'\n\t\t\t}\n\t\t</script>\n\t</head>\n\n\t<body onload=\"activateSlider();\">\n\t\t<pre class=\"output\"></pre>\n\n\t\t<h1>Slider Motion Sensor Example</h1>\n\n\t\t<p>\n\t\t\tOpen this slider on a device with a motion sensor, such as a smart phone or tablet. Rotate the device to adjust\n\t\t\tthe slider value. Activate the control panel to access decrease and increase buttons that also adjust the value.\n\t\t</p>\n\t\t<input type=\"button\" onclick=\"openModal()\" value=\"Control panel\" />\n\t\t<p>Note: This example may not work across all browsers.</p>\n\n\t\t<input type=\"range\" min=\"1\" max=\"100\" value=\"50\" id=\"motionSlider\" disabled />\n\t\t<p aria-live=\"polite\">Slider Value: <span id=\"output\">50</span></p>\n\n\t\t<div\n\t\t\tstyle=\"\n        display: none;\n        position: fixed;\n        top: 17em;\n        left: 1em;\n        background-color: #505050;\n        color: white;\n        padding: 0.5em;\n      \"\n\t\t\tid=\"overlay\"\n\t\t>\n\t\t\t<button id=\"decreaseSlider\" type=\"button\">Decrease Value</button>\n\t\t\t<button id=\"increaseSlider\" type=\"button\">Increase Value</button>\n\t\t\t<button onclick=\"closeModal();\">Dismiss</button>\n\t\t</div>\n\t</body>\n</html>" }]
    failed: [{ name: 'Failed Example 1', description: "This HTML document that can be operated through the device's orientation to increase and decrease the value of a slider has not other way to achieve the **same result**.", html: "<html>\n\t<head>\n\t\t<title>Failed Example 1</title>\n\t\t<script src=\"/test-assets/7677a9/slider.js\"></script>\n\t\t<script>\n\t\t\tfunction activateSlider() {\n\t\t\t\twindow.addEventListener('deviceorientation', handleOrientation)\n\t\t\t}\n\t\t</script>\n\t</head>\n\n\t<body onload=\"activateSlider();\">\n\t\t<pre class=\"output\"></pre>\n\n\t\t<h1>Slider Motion Sensor Example</h1>\n\n\t\t<p>\n\t\t\tOpen this slider on a device with a motion sensor, such as a smart phone or tablet. Tilt the device to the right\n\t\t\tand left to adjust the slider value.\n\t\t</p>\n\t\t<p>Note: This example may not work across all browsers.</p>\n\n\t\t<div>\n\t\t\t<input type=\"range\" min=\"1\" max=\"100\" value=\"50\" id=\"motionSlider\" disabled />\n\t\t\t<button id=\"increaseSlider\" type=\"button\">Increase Value</button>\n\t\t\t<p aria-live=\"polite\">Slider Value: <span id=\"output\">50</span></p>\n\t\t</div>\n\t</body>\n</html>" }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: 'This HTML document is not operable by device motion.', html: '<p>ACT-Rules</p>' }]
expectation: "For each registered device orientation event or device motion event in the test target at least one of the following is true:\n\n- **no changes:** The registered event does not cause changes to the content of the web page; or\n- **same result:** There is at least one set of instruments, where each instrument is in the same web page of the registered event or can be found in a clearly labeled location from that web page, causing the same changes in content as the event."
