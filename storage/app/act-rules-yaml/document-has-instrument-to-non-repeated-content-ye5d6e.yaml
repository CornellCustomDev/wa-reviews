id: ye5d6e
name: 'Document has an instrument to move focus to non-repeated content'
metadata:
    id: ye5d6e
    name: 'Document has an instrument to move focus to non-repeated content'
    rule_type: atomic
    description: "This rule checks that there is an instrument to move focus to non-repeated content in the page\n"
    accessibility_requirements: { 'wcag-technique:G1': { forConformance: false, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' }, 'wcag-technique:G123': { forConformance: false, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' }, 'wcag-technique:G124': { forConformance: false, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['Accessibility Tree', 'CSS styling', 'DOM Tree', Language]
    acknowledgments: { authors: ['Jean-Yves Moyen'], funding: [WAI-Tools], assets: ['_The Three Kingdoms_ by Luo Guanzhong, translation by Yu Sumei (Tuttle publishing, 2014, ISBN 9780804843935)'] }
applicability: 'This rule applies to any HTML web page.'
assumptions: 'This rule assumes that there is at least one block of repeated content before the non-repeated content, and therefore Technique G123: Adding a link at the beginning of a block of repeated content to go to the end of the block will require a link to the non-repeated content in order to skip this block of repeated content. If there is no block of repeated content before the non-repeated content, then it is possible to fail this rule but still pass Technique G123: Adding a link at the beginning of a block of repeated content to go to the end of the block.'
accessibility_support: 'There are no accessibility support issues known.'
background: "The intention of this rule is that focus is moved to the main area of content of a document. However, defining the main area of content in a non-ambiguous way is not really doable. Therefore, the rule takes a more lenient position and only requires to move focus to some non-repeated content. Additional conditions on this destination were considered and rejected when writing the rule since it might be acceptable, for example, to skip the first heading of the main area of content if it has the exact same content as the `title` element of the document. Therefore, it is possible to pass this rule but still fail the related techniques and violate Success Criterion 2.4.1 Bypass blocks.\n\nWhile it is clear that a \"skip link\" is a valid way to satisfy Success Criterion 2.4.1 Bypass blocks, it is less clear how \"deep\" in the page such a skip link could be. Notably, Technique G124: Adding links at the top of the page to each area of the content is listing valid cases where it could be fairly \"deep\" if the page has many areas of the content. Rather than trying to fix an arbitrary value (e.g. \"the skip link must be among the first 5 focusable elements\"), or trying to figure out some condition on what precedes it, this rule only checks its existence. It is clear that if no \"skip link\" is provided, then another way to bypass blocks of repeated content must be found. However, it is possible to pass this rule without satisfying Success Criterion 2.4.1 Bypass blocks if the skip link is too far away from the start of the page.\n\n### Bibliography\n\n- Technique G1: Adding a link at the top of each page that goes directly to the main content area\n- Technique G123: Adding a link at the beginning of a block of repeated content to go to the end of the block\n- Technique G124: Adding links at the top of the page to each area of the content"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'In this document, the first `a` element is an instrument to navigate, and thus move the focus, to the non-repeated content. This example passes Technique G1: Adding a link at the top of each page that goes directly to the main content area.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<a href=\"#main\">Skip to main content</a>\n\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\n\t\t<aside id=\"about-book\">\n\t\t\t<p>The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 2', description: 'In this document, the third `a` element is an instrument to move the focus to the non-repeated content. This example passes Technique G124: Adding links at the top of the page to each area of the content.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"local-navigation\">\n\t\t\t<a href=\"#bio-translator\">Skip to translator's biography</a>\n\t\t\t<a href=\"#about-book\">Skip to information about the book</a>\n\t\t\t<a href=\"#main\">Skip to main content</a>\n\t\t</nav>\n\n\t\t<aside id=\"bio-translator\">\n\t\t\t<p>Yu Sumei is a professor of English at East China Normal University.</p>\n\t\t</aside>\n\t\t<aside id=\"about-book\">\n\t\t\t<p>The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 3', description: 'In this document, the second `a` element (inside the second `aside` element) is an instrument to move the focus to the non-repeated content. This example passes Technique G123: Adding a link at the beginning of a block of repeated content to go to the end of the block.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<aside id=\"bio-translator\">\n\t\t\t<a href=\"#about-book\">Skip to information about the book</a>\n\t\t\t<p>Yu Sumei is a professor of English at East China Normal University.</p>\n\t\t</aside>\n\t\t<aside id=\"about-book\">\n\t\t\t<a href=\"#main\">Skip to main content</a>\n\t\t\t<p>The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 4', description: 'In this document, the first `a` element is an instrument to move the focus to the non-repeated content. In this case, the element is normally hidden but is visible when focused.', html: "<html lang=\"en\">\n\t<head>\n\t\t<link rel=\"stylesheet\" href=\"/test-assets/bypass-blocks-cf77f2/styles.css\" />\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav class=\"visible-on-focus\">\n\t\t\t<a href=\"#main\">Skip to main content</a>\n\t\t</nav>\n\n\t\t<aside id=\"about-book\">\n\t\t\t<p>The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 5', description: 'In this document, the first `div` element is an instrument to move the focus to the non-repeated content.', html: "<html lang=\"en\">\n\t<head>\n\t\t<script src=\"/test-assets/bypass-blocks-cf77f2/click-on-enter.js\"></script>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body onload=\"ClickOnEnter('skip-link')\">\n\t\t<div role=\"link\" onclick=\"location.assign('#main');\" tabindex=\"0\" id=\"skip-link\">Skip to main content</div>\n\n\t\t<aside id=\"about-book\">\n\t\t\t<p>The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 6', description: 'In this document, the first `a` element is an instrument to move the focus to the non-repeated content.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<a href=\"#main\" aria-label=\"Skip to main content\">ðŸ“–</a>\n\n\t\t<aside id=\"about-book\">\n\t\t\t<p>The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 7', description: 'In this document, the first `a` element is an instrument to move the focus to the non-repeated content. Even though its target is inside a block of repeated content, it is still just before some non-repeated content after repeated content because there is no perceivable content between the link target and the non-repeated content. Thus, following the link does skip all the repeated content.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<a href=\"#just-before-main\">Skip to main content</a>\n\n\t\t<aside id=\"about-book\">\n\t\t\t<p>The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t\t<span id=\"just-before-main\"></span>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 8', description: 'In this document, the first `a` element is an instrument to move the focus to the non-repeated content. Even though its target is not the first element after it, it is still just before the first non-repeated content after repeated content. Thus, following the link does not skip any non-repeated content.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<a href=\"#just-before-main\">Skip to main content</a>\n\n\t\t<aside id=\"about-book\">\n\t\t\t<p>The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<hr />\n\t\t\t<span id=\"just-before-main\"></span>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\t\t</div>\n\t</body>\n</html>" }]
    failed: [{ name: 'Failed Example 1', description: 'This document has no instrument to skip to the non-repeated content.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\n\t\t<aside id=\"about-book\">\n\t\t\t<p>The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Failed Example 2', description: 'In this document, the link to skip to the non-repeated content does not reference a valid `id` attribute and thus when activated will not move focus to the non-repeated content.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<a href=\"#invalid-id\">Skip to main content</a>\n\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\n\t\t<aside id=\"about-book\">\n\t\t\t<p>The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Failed Example 3', description: 'In this document, the skip link does not move focus just before some non-repeated content after repeated content. The focus is moved on perceivable content which is inside the block of repeated content. Thus, following the link does not skip all the repeated content.', html: "<html lang=\"en\">\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<a href=\"#before-main\">Skip to main content</a>\n\t\t<a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Read Chapter 2</a>\n\n\t\t<aside id=\"about-book\">\n\t\t\t<p id=\"before-main\">The Romance of the Three Kingdoms is a 14th century historical novel.</p>\n\t\t</aside>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }]
expectation: 'For each test target, there exists at least one instrument inside it to move focus just before a node of non-repeated content after repeated content.'
