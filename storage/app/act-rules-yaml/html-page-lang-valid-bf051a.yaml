id: bf051a
name: 'HTML page lang attribute has valid language tag'
metadata:
    id: bf051a
    name: 'HTML page lang attribute has valid language tag'
    rule_type: atomic
    description: "This rule checks that the `lang` attribute of the root element of a non-embedded HTML page has a language tag with a known primary language subtag.\n"
    accessibility_requirements: { 'wcag20:3.1.1': { forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' }, 'wcag-technique:H57': { forConformance: false, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['DOM Tree']
    acknowledgments: { authors: ['Jey Nandakumar'], previous_authors: ['Annika Nietzio'], funding: [WAI-Tools] }
applicability: "This rule applies to any [document element](https://dom.spec.whatwg.org/#document-element) if it is an `html` element for which all the following are true:\n\n- has a `lang` attribute that is neither empty (\"\") nor only [ASCII whitespace](https://infra.spec.whatwg.org/#ascii-whitespace); and\n- is in a [top-level browsing context](https://html.spec.whatwg.org/#top-level-browsing-context); and\n- has a [node document](https://dom.spec.whatwg.org/#concept-node-document) with a [content type](https://dom.spec.whatwg.org/#concept-document-content-type) of `text/html`."
assumptions: "- The language of the page can be set by other methods than the `lang` attribute, for example using HTTP headers or the `meta` element. These methods are not supported by all assistive technologies. This rule assumes that these other methods are insufficient to satisfying [Success Criterion 3.1.1: Language of Page](https://www.w3.org/TR/WCAG22/#language-of-page).\n\n- This rule assumes that user agents and assistive technologies can programmatically determine known primary language tags even if these do not conform to the RFC 5646 syntax.\n\n- This rule assumes that only known primary language tags are enough to satisfy Success Criterion 3.1.1 Language of Page; this notably excludes grandfathered tags and ISO 639.2 three-letters codes, both having poor support in assistive technologies."
accessibility_support: 'There are no accessibility support issues known.'
background: "This rule is only applicable to non-embedded HTML pages. HTML pages embedded into other documents, such as through `iframe` or `object` elements are not applicable because they are not [web pages](https://www.w3.org/TR/WCAG22/#dfn-web-page-s) according to the definition in WCAG.\n\n### Related rules\n\n- [HTML page has `lang` attribute](https://www.w3.org/WAI/standards-guidelines/act/rules/b5c3f8/)\n- [HTML page language subtag matches default language](https://www.w3.org/WAI/standards-guidelines/act/rules/ucwvc8/)\n\n### Bibliography\n\n- [Understanding Success Criterion 3.1.1: Language of Page](https://www.w3.org/WAI/WCAG22/Understanding/language-of-page.html)\n- [H57: Using language attributes on the html element](https://www.w3.org/WAI/WCAG22/Techniques/html/H57)\n- [RFC 5646: Tags for Identifying Languages](https://www.rfc-editor.org/rfc/rfc5646.html)\n- [The `lang` and `xml:lang` attributes](https://html.spec.whatwg.org/multipage/dom.html#the-lang-and-xml:lang-attributes)"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This `html` element has a `lang` attribute with a known primary language tag.', html: '<html lang="FR"></html>' }, { name: 'Passed Example 2', description: 'This `html` element has a `lang` attribute with a known primary language tag even though the region subtag is not.', html: '<html lang="en-US-GB"></html>' }]
    failed: [{ name: 'Failed Example 1', description: 'This `html` element has a `lang` attribute with a known primary language tag.', html: '<html lang="em-US"></html>' }, { name: 'Failed Example 2', description: 'This `html` element has a `lang` attribute with a known primary language tag.', html: '<html lang="#1"></html>' }, { name: 'Failed Example 3', description: 'The `lang` attribute of this page is an iso 639.2 three letters code, which has no known primary language tag.', html: "<html lang=\"eng\">\n\t<body>\n\t\t<p lang=\"en\">I love ACT rules!</p>\n\t</body>\n</html>" }, { name: 'Failed Example 4', description: 'The `lang` attribute of this page is a grandfathered tag, which has no known primary language tag.', html: "<html lang=\"i-lux\">\n\t<body>\n\t\t<p lang=\"lb\">LÃ«tzebuerg ass e Land an Europa.</p>\n\t</body>\n</html>" }]
expectation: 'For each test target, the `lang` attribute has a known primary language tag.'
