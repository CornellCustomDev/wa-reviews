id: efbfc7
name: 'Text content that changes automatically can be paused, stopped or hidden'
metadata:
    id: efbfc7
    name: 'Text content that changes automatically can be paused, stopped or hidden'
    rule_type: atomic
    description: "This rule checks that for any text content that regularly changes automatically, there are instruments to pause, stop, or hide it or to control its changing frequency.\n"
    accessibility_requirements: { 'wcag20:2.2.2': { forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' }, 'wcag-text:cc5': { title: 'WCAG Non-Interference', forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['DOM Tree', 'CSS Styling']
    acknowledgments: { authors: ['Carlos Duarte'], funding: [WAI-Tools] }
applicability: "This rule applies to any HTML element that has a visible text node as a descendant in the flat tree, for which all the following is true:\n\n- **changed:** the `innerText` property of the element changes multiple times within a 10 minute time span where there is no user interaction; and\n- **no child changed:** the element does not have children in the flat tree whose `innerText` property also changes; and\n- **not alone:** the element has an ancestor element in the flat tree with a non-empty `innerText` property whose value is different from the `innerText` of the test target."
assumptions: "- The auto-updating of the content is not essential, which is listed as valid exception to Success Criterion 2.2.2: Pause, Stop, Hide. When the auto-updating of content is essential this rule may produce incorrect results.\n- The content being changed automatically is information. If the automatically changing content is not information (for example, an ASCII rendered spinning icon that does not provide information on what time is left for a process to end or how much progress has been made) the rule might fail but the success criterion might still be satisfied.\n- Any content changes are enabled by the content of the HTML document the test target belongs to. Changes originating from any other sources (e.g. browser shortcuts, browser extensions, browser settings, user agents, external browser applications) are not considered.\n- All user actions are transmitted by the user agent to the HTML document. If there are other event sources that result from a user action this rule might fail but the success criterion might still be satisfied.\n- Available instruments for controlling the content changes rely on activation. If there are other instruments that do not rely on activation then the rule might fail but the success criterion might still be satisfied.\n- If there are other ways to control the automatically changing content that do not require the user to interact with the web page, failing this rule might not be a failure of the success criterion.\n- This rule does not check that the pausing instrument does not tie up the user focus. If that happens, then this rule might pass but the success criterion would not be satisfied."
accessibility_support: 'There are no accessibility support issues known.'
background: "The 10 minute time span in the applicability is arbitrary. It is selected so that testing this rule would not become impractical. This 10 minute constraint is not included in WCAG. Content that changes less frequently may fail success criteria 2.2.2 without failing this rule.\n\nThe instruments used to pass this rule (if any), must meet all level A Success Criteria in order to fully satisfy Success Criterion 2.2.2: Pause, Stop, Hide. These extra requirements are left out of this rule, and should be tested separately.\n\n### Bibliography\n\n- Understanding Success Criterion 2.2.2: Pause, Stop, Hide\n- G186: Using a control in the Web page that stops moving, blinking, or auto-updating content\n- F16: Failure of Success Criterion 2.2.2 due to including scrolling content where movement is not essential to the activity without also including a mechanism to pause and restart the content"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This `span` element contains text content that is automatically **changed** multiple times without user intervention and there is a button available to stop the automatic changes. The rule is not applicable to the second `p` element because it has a **child changed** (the `span` element).', html: "<body onload=\"startUpdates()\">\n\t<p>\n\t\tThe W3C Web Accessibility Initiative (WAI) develops standards and support materials to help you understand and\n\t\timplement accessibility.\n\t</p>\n\n\t<p>Random number: <span id=\"target\">1</span></p>\n\t<input type=\"button\" onclick=\"stopUpdates()\" value=\"Stop changes\" />\n\n\t<script type=\"text/javascript\" src=\"/test-assets/efbfc7/script.js\"></script>\n</body>" }, { name: 'Passed Example 2', description: 'This `span` element contains text content that is automatically **changed** multiple times without user intervention and there is a button available to pause and resume the automatic changes. The rule is not applicable to the second `p` element because it has a **child changed** (the `span` element).', html: "<body onload=\"startUpdates()\">\n\t<p>\n\t\tThe W3C Web Accessibility Initiative (WAI) develops standards and support materials to help you understand and\n\t\timplement accessibility.\n\t</p>\n\n\t<p>Random number: <span id=\"target\">1</span></p>\n\t<input type=\"button\" id=\"control\" onclick=\"toggleUpdates()\" value=\"Pause changes\" />\n\n\t<script type=\"text/javascript\" src=\"/test-assets/efbfc7/script.js\"></script>\n</body>" }, { name: 'Passed Example 3', description: 'This `span` element contains text content that is automatically **changed** multiple times without user intervention and there is a button available to hide the automatically updating content. The rule is not applicable to the second `p` element because it has a **child changed** (the `span` element).', html: "<body onload=\"startUpdates()\">\n\t<p>\n\t\tThe W3C Web Accessibility Initiative (WAI) develops standards and support materials to help you understand and\n\t\timplement accessibility.\n\t</p>\n\n\t<p>Random number: <span id=\"target\">1</span></p>\n\t<input type=\"button\" onclick=\"hide()\" value=\"Hide changing content\" />\n\n\t<script type=\"text/javascript\" src=\"/test-assets/efbfc7/script.js\"></script>\n</body>" }, { name: 'Passed Example 4', description: 'This `span` element contains text content that is automatically **changed** multiple times without user intervention and there is an instrument available to modify the frequency of the changes. The rule is not applicable to the second `p` element because it has a **child changed** (the `span` element).', html: "<body onload=\"startUpdates()\">\n\t<p>\n\t\tThe W3C Web Accessibility Initiative (WAI) develops standards and support materials to help you understand and\n\t\timplement accessibility.\n\t</p>\n\n\t<p>Random number: <span id=\"target\">1</span></p>\n\t<label for=\"interval\">Content change frequency (seconds):</label>\n\t<input type=\"text\" id=\"interval\" />\n\t<input type=\"button\" onclick=\"changeFrequency(document.getElementById('interval').value)\" value=\"Change frequency\" />\n\n\t<script type=\"text/javascript\" src=\"/test-assets/efbfc7/script.js\"></script>\n</body>" }, { name: 'Passed Example 5', description: 'This `span` element contains text content that is automatically **changed** multiple times without user intervention and the location of an instrument to control the changes is clearly available.', html: "<body onload=\"startUpdates()\">\n\t<p>\n\t\tThe W3C Web Accessibility Initiative (WAI) develops standards and support materials to help you understand and\n\t\timplement accessibility.\n\t</p>\n\n\t<p>Random number: <span id=\"target\">1</span></p>\n\t<p>To control the random number updates activate the \"Control changes\" button.</p>\n\t<input type=\"button\" onclick=\"openModal()\" value=\"Control changes\" />\n\n\t<div\n\t\tstyle=\"\n      display: none;\n      position: fixed;\n      top: 2em;\n      left: 10em;\n      background-color: #505050;\n      color: white;\n      padding: 1em;\n      padding-top: 0em;\n    \"\n\t\tid=\"overlay\"\n\t>\n\t\t<p>Control changes</p>\n\t\t<input type=\"button\" id=\"control\" onclick=\"toggleUpdates()\" value=\"Pause changes\" />\n\t\t<input type=\"button\" onclick=\"hide()\" value=\"Hide changes\" />\n\t\t<button onclick=\"closeModal();\">Dismiss</button>\n\t</div>\n\n\t<script type=\"text/javascript\">\n\t\tfunction openModal() {\n\t\t\tdocument.getElementById('overlay').style.display = 'block'\n\t\t}\n\t\tfunction closeModal() {\n\t\t\tdocument.getElementById('overlay').style.display = 'none'\n\t\t}\n\t</script>\n\t<script type=\"text/javascript\" src=\"/test-assets/efbfc7/script.js\"></script>\n</body>" }]
    failed: [{ name: 'Failed Example 1', description: 'This `span` element contains text content that is automatically **changed** multiple times without user intervention and there is no instrument available to stop, pause, hide or alter the frequency of the automatic changes.', html: "<body onload=\"startUpdates()\">\n\t<p>\n\t\tThe W3C Web Accessibility Initiative (WAI) develops standards and support materials to help you understand and\n\t\timplement accessibility.\n\t</p>\n\n\t<p>Random number: <span id=\"target\">1</span></p>\n\n\t<script type=\"text/javascript\" src=\"/test-assets/efbfc7/script.js\"></script>\n</body>" }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: 'This document does not have any visible text node.', html: "<img src=\"/test-assets/shared/w3c-logo.png\" alt=\"W3C logo\" />\n<p style=\"display: none\">\n\tThe W3C Web Accessibility Initiative (WAI) develops standards and support materials to help you understand and\n\timplement accessibility.\n</p>" }, { name: 'Inapplicable Example 2', description: 'This document does not have text content that is automatically **changed**.', html: "<p>\n\tThe W3C Web Accessibility Initiative (WAI) develops standards and support materials to help you understand and\n\timplement accessibility.\n</p>" }, { name: 'Inapplicable Example 3', description: 'This `span` element changes color but not its `innerText` property.', html: "<body onload=\"startColorUpdates()\">\n\t<p>\n\t\tThe W3C Web Accessibility Initiative (WAI) develops standards and support materials to help you understand and\n\t\timplement accessibility.\n\t</p>\n\n\t<p>Number: <span id=\"target\">1</span></p>\n\t<input type=\"button\" onclick=\"stop()\" value=\"Stop color changes\" />\n\n\t<script>\n\t\tconst myColors = ['red', 'green', 'blue', 'black']\n\t\tlet updates\n\n\t\tfunction startColorUpdates() {\n\t\t\tupdates = setInterval(change, 1000)\n\t\t}\n\n\t\tfunction change() {\n\t\t\tlet randomColor = myColors[Math.floor(Math.random() * myColors.length)]\n\t\t\tvar target = document.getElementById('target')\n\t\t\ttarget.style.color = randomColor\n\t\t}\n\n\t\tfunction stop() {\n\t\t\tclearInterval(updates)\n\t\t}\n\t</script>\n</body>" }, { name: 'Inapplicable Example 4', description: 'This `span` element contains text content that is automatically **changed** but only as a result of the user activating a button on the page.', html: "<body>\n\t<p>\n\t\tThe W3C Web Accessibility Initiative (WAI) develops standards and support materials to help you understand and\n\t\timplement accessibility.\n\t</p>\n\n\t<p>Random number: <span id=\"target\">1</span></p>\n\t<input type=\"button\" id=\"control\" onclick=\"toggleUpdates()\" value=\"Start changes\" />\n\n\t<script type=\"text/javascript\" src=\"/test-assets/efbfc7/script.js\"></script>\n</body>" }, { name: 'Inapplicable Example 5', description: 'This `span` element with text content that automatically changes multiple times is **alone** in the document.', html: "<body onload=\"startUpdates()\">\n\t<span id=\"target\">1</span>\n\n\t<script type=\"text/javascript\" src=\"/test-assets/efbfc7/script.js\"></script>\n</body>" }]
expectation: "For each test target there is at least one set of instruments, where each instrument is in the same web page as the test target or can be found in a clearly labeled location from that web page, to achieve at least one of the following objectives:\n\n- pause and resume the change of the visible text content; or\n- stop the change of the visible text content; or\n- hide the changing visible text content; or\n- control the frequency of the changes of the visible text content.\n\n**Note:** If there is more than one test target, the same instrument may be used to pause (or stop, or hide or alter the frequency) of several or even all test targets."
