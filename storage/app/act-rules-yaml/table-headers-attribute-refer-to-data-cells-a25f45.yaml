id: a25f45
name: 'Headers attribute specified on a cell refers to cells in the same table element'
metadata:
    id: a25f45
    name: 'Headers attribute specified on a cell refers to cells in the same table element'
    rule_type: atomic
    description: "This rule checks that the `headers` attribute on a cell refer to other cells in the same `table` element.\n"
    accessibility_requirements: { 'wcag20:1.3.1': { forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' }, 'wcag-technique:H43': { forConformance: false, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['DOM Tree', 'CSS Styling']
    acknowledgments: { authors: ['Audrey Maniez', 'Jey Nandakumar'], funding: [WAI-Tools] }
applicability: "This rule applies to any `headers` attribute specified on a `cell` within a `table` element, where all of the following is true for the `table` element:\n\n- The `table` is visible; and\n- The `table` is included in the accessibility tree; and\n- The `table` has a semantic role of `table`, `grid` or `treegrid`."
assumptions: "- This rule assumes that the `headers` attribute is only used to identify table headers. If other information is included in the `headers` attribute, the rule may fail on issues that are not accessibility concerns. For example, if `headers` is used to include information for scripts, this rule may not be accurate.\n- This rule assumes that the `headers` attribute is required to express the relationship between data and table header cells in the same `table`. If the browser computes an adequate fallback header for cells that have the `headers` attribute value that does not correspond to the `id` of any one cell in the same `table`, success Criterion 1.3.1 Info and Relationships may be satisfied even if this rule failed.\n- This rule assumes that the id values on the `headers` attribute are unique."
accessibility_support: 'There are no accessibility support issues known.'
background: "### Bibliography\n\n- [Understanding Success Criterion 1.3.1: Info and Relationships](https://www.w3.org/WAI/WCAG22/Understanding/info-and-relationships.html)\n- [H43: Using id and headers attributes to associate data cells with header cells in data tables](https://www.w3.org/WAI/WCAG22/Techniques/html/H43)\n- [F90: Incorrectly associating table headers and content via the headers and id attributes](https://www.w3.org/WAI/WCAG22/Techniques/failures/F90)\n\n* `headers` attribute referencing elements that are non-existent or not in the table are ignored when [assigning header cells (step 3, first case, point 2)](https://html.spec.whatwg.org/multipage/tables.html#algorithm-for-assigning-header-cells).\n* `headers` attribute referencing to the cell itself are ignored when [assigning header cells (step 3, first case, point 2)](https://html.spec.whatwg.org/multipage/tables.html#algorithm-for-assigning-header-cells)."
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'The `headers` attribute on the data cells refers to a `th` element within the same `table`.', html: "<table>\n\t<thead>\n\t\t<tr>\n\t\t\t<th id=\"header1\">Projects</th>\n\t\t\t<th id=\"header2\">Objective</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td headers=\"header1\">15%</td>\n\t\t\t<td headers=\"header2\">10%</td>\n\t\t</tr>\n\t</tbody>\n</table>" }, { name: 'Passed Example 2', description: 'The `headers` attribute on the cell refers to a `th` element within the same `table`. Multiple headers are referenced for a cell with `colspan` of `2`.', html: "<table>\n\t<thead>\n\t\t<tr>\n\t\t\t<th id=\"header1\">Projects</th>\n\t\t\t<th id=\"header2\">Exams</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" headers=\"header1 header2\">15%</td>\n\t\t</tr>\n\t</tbody>\n</table>" }, { name: 'Passed Example 3', description: 'The `headers` attribute on the data cells in the second row refers to a `td` element with a role of `columnheader` within the same `table`.', html: "<table>\n\t<thead>\n\t\t<tr>\n\t\t\t<td role=\"columnheader\" id=\"header1\">Projects</td>\n\t\t\t<td role=\"columnheader\" id=\"header2\">Objective</td>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td headers=\"header1\">15%</td>\n\t\t\t<td headers=\"header2\">10%</td>\n\t\t</tr>\n\t</tbody>\n</table>" }, { name: 'Passed Example 4', description: 'This `table` has multiple elements with a role of `columnheader`. The `headers` attribute on the cells lists IDs of `th` elements within the same `table`.', html: "<table>\n\t<tr>\n\t\t<th colspan=\"2\" id=\"header1\">Projects</th>\n\t\t<th colspan=\"2\" id=\"header2\">Exams</th>\n\t</tr>\n\t<tr>\n\t\t<th id=\"e1\" headers=\"header1\">1</th>\n\t\t<th id=\"e2\" headers=\"header1\">2</th>\n\t\t<th id=\"p1\" headers=\"header2\">1</th>\n\t\t<th id=\"p2\" headers=\"header2\">2</th>\n\t</tr>\n\t<tr>\n\t\t<td colspan=\"2\" headers=\"header1 e1 e2\">15%</td>\n\t\t<td headers=\"header2 p1\">15%</td>\n\t\t<td headers=\"header2 p2\">45%</td>\n\t</tr>\n</table>" }, { name: 'Passed Example 5', description: 'The `headers` attribute on the second data cell in each row refers to a `th` element with a role of `rowheader` within the same `table`.', html: "<table>\n\t<tbody>\n\t\t<tr>\n\t\t\t<th role=\"rowheader\" id=\"headerAge\">Age</th>\n\t\t\t<td headers=\"headerAge\">65</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th role=\"rowheader\" id=\"headerObjective\">Objective</th>\n\t\t\t<td headers=\"headerObjective\">40%</td>\n\t\t</tr>\n\t</tbody>\n</table>" }, { name: 'Passed Example 6', description: 'The `headers` attribute on the last two `th` elements refers to another `th` element within the same `table`. Here the column header has a span of two columns.', html: "<table>\n\t<tr>\n\t\t<th id=\"name\" colspan=\"2\">Name</th>\n\t</tr>\n\t<tr>\n\t\t<th headers=\"name\">Firstname</th>\n\t\t<th headers=\"name\">Lastname</th>\n\t</tr>\n</table>" }, { name: 'Passed Example 7', description: 'The `headers` attribute on the cells refers to `th` elements which are row scoped & within the same `table`.', html: "<table>\n\t<tr>\n\t\t<th id=\"projects1\" scope=\"row\">Projects</th>\n\t\t<th id=\"progress1\" scope=\"row\">Progress</th>\n\t</tr>\n\t<tr>\n\t\t<td headers=\"projects1\">My Project</td>\n\t\t<td headers=\"progress1\">15%</td>\n\t</tr>\n</table>" }, { name: 'Passed Example 8', description: 'The `headers` attribute on the cell refers to `th` element which is not the same column as the cell.', html: "<table>\n\t<tr>\n\t\t<td></td>\n\t\t<th id=\"projects2\">Projects</th>\n\t</tr>\n\t<tr>\n\t\t<td headers=\"projects2\">15%</td>\n\t\t<td></td>\n\t</tr>\n</table>" }]
    failed: [{ name: 'Failed Example 1', description: 'The `td` elements have a `headers` attribute referring to an ID that does not exist within the same `table`. Here the referenced ID is incorrect.', html: "<table>\n\t<tr>\n\t\t<th id=\"headerOfColumn1\">Projects</th>\n\t\t<th id=\"headerOfColumn2\">Objective</th>\n\t</tr>\n\t<tr>\n\t\t<td headers=\"headOfColumn1\">15%</td>\n\t\t<td headers=\"headOfColumn2\">10%</td>\n\t</tr>\n</table>" }, { name: 'Failed Example 2', description: 'The `td` elements have a `headers` attribute referring to an ID that exist in a separate `table`.', html: "<table>\n\t<tr>\n\t\t<th id=\"headOfColumn1\">Projects</th>\n\t\t<th id=\"headOfColumn2\">Objective</th>\n\t</tr>\n</table>\n\n<table>\n\t<tr>\n\t\t<td headers=\"headOfColumn1\">15%</td>\n\t\t<td headers=\"headOfColumn2\">10%</td>\n\t</tr>\n</table>" }, { name: 'Failed Example 3', description: 'The `td` element has a `headers` attribute referring to its own ID.', html: "<table>\n\t<tr>\n\t\t<th>Event Type</th>\n\t</tr>\n\t<tr>\n\t\t<td id=\"headerBday\" headers=\"headerBday\">\n\t\t\tBirthday\n\t\t</td>\n\t</tr>\n</table>" }, { name: 'Failed Example 4', description: 'The `headers` attribute on the data cells in the second row refers to an element inside the same `table` which does not have a role of `rowheader` or `columnheader`.', html: "<table>\n\t<tr>\n\t\t<td>\n\t\t\t<span id=\"headerProject\">Projects</span>\n\t\t</td>\n\t\t<td>\n\t\t\t<span id=\"headerObjective\">Objective</span>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td headers=\"headerProject\">\n\t\t\t15%\n\t\t</td>\n\t\t<td headers=\"headerObjective\">\n\t\t\t10%\n\t\t</td>\n\t</tr>\n</table>" }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: 'There is no `headers` attribute.', html: "<table>\n\t<tr>\n\t\t<th scope=\"col\">Projects</th>\n\t\t<th scope=\"col\">Exams</th>\n\t</tr>\n\t<tr>\n\t\t<td>15%</td>\n\t\t<td>45%</td>\n\t</tr>\n</table>" }, { name: 'Inapplicable Example 2', description: 'The `table` has a `role="presentation"` and thus is not included in the accessibility tree.', html: "<table role=\"presentation\">\n\t<tr>\n\t\t<td id=\"header1\">Project Status</td>\n\t\t<td id=\"header2\">Objective</td>\n\t</tr>\n\t<tr>\n\t\t<td headers=\"header1\">15%</td>\n\t\t<td headers=\"header2\">10%</td>\n\t</tr>\n</table>" }, { name: 'Inapplicable Example 3', description: 'The `table` is not visible in page.', html: "<html>\n\t<style>\n\t\t.notInPage {\n\t\t\tposition: absolute;\n\t\t\tleft: -9999px;\n\t\t\ttop: -9999px;\n\t\t}\n\t</style>\n\t<table class=\"notInPage\">\n\t\t<tr>\n\t\t\t<th id=\"header1\">Project Status</th>\n\t\t\t<th id=\"header2\">Objective</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td headers=\"header1\">15%</td>\n\t\t\t<td headers=\"header2\">10%</td>\n\t\t</tr>\n\t</table>\n</html>" }, { name: 'Inapplicable Example 4', description: 'The rule applies only to `headers` attribute within a `table` element.', html: "<div role=\"table\">\n\t<div role=\"row\">\n\t\t<div role=\"columnheader\" id=\"header1\">Projects</div>\n\t\t<div role=\"columnheader\" id=\"header2\">Exams</div>\n\t</div>\n\t<div role=\"row\">\n\t\t<div role=\"cell\" headers=\"header2\">15%</div>\n\t\t<div role=\"cell\" headers=\"header1\">15%</div>\n\t</div>\n</div>" }, { name: 'Inapplicable Example 5', description: 'The `table` is not included in the accessibility tree.', html: "<table style=\"display:none;\">\n\t<tr>\n\t\t<td id=\"header1\">Project Status</td>\n\t\t<td id=\"header2\">Objective</td>\n\t</tr>\n\t<tr>\n\t\t<td headers=\"header1\">15%</td>\n\t\t<td headers=\"header2\">10%</td>\n\t</tr>\n</table>" }, { name: 'Inapplicable Example 6', description: "This `table` doesn't have a role of `table`, `grid` or `treegrid`.", html: "<table role=\"region\">\n\t<td id=\"self\" headers=\"self\">World</td>\n</table>" }]
expectation: "Each target's attribute value is a set of space separated tokens. Each token is the value of the `id` attribute of an element, that is a `cell` of the same `table`.Each target's attribute value is a set of space separated tokens, and none of these tokens is the `id` of the element on which the test target is specified."
