id: 7d6734
name: 'SVG element with explicit role has non-empty accessible name'
metadata:
    id: 7d6734
    name: 'SVG element with explicit role has non-empty accessible name'
    rule_type: atomic
    description: "This rule checks that each SVG image element that is explicitly included in the accessibility tree has a non-empty accessible name.\n"
    accessibility_requirements: { 'wcag20:1.1.1': { forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['DOM Tree', 'CSS Styling']
    acknowledgments: { authors: ['Bryn Anderson'], funding: [WAI-Tools] }
applicability: 'This rule applies to any SVG element with an explicit semantic role of either `img`, `graphics-document`, `graphics-symbol`, that is included in the accessibility tree.'
assumptions: "This rule assumes that the presence of one of the roles outlined in the applicability indicates the author's intent to include the element in the accessibility tree and thus convey information to the user about that element."
accessibility_support: "The HTML Accessibility API Mappings](https://www.w3.org/TR/html-aam-1.0/#html-element-role-mappings) specify that the `<svg>` element has an implicit role of `graphics-document`. However browser support for the `graphics-document` role and the [SVG Accessibility API Mappings is inconsistent.\n\nThis rule is limited to the explicit use of roles, as a clear indication that content should convey meaning, until the SVG Accessibility API Mappings is more stable and browser support is more consistent.\n\nBrowser and assistive technology support for SVG `<title>` and `<desc>` elements is currently inconsistent. Using WAI ARIA in combination with the `img` role for non-decorative `<svg>` elements significantly improves accessibility browser support.\n\nUntil browser support for the SVG Accessibility API Mappings is more consistent it is recommended to explicitly remove decorative `<svg>` elements from the accessibility tree."
background: "### Bibliography\n\n- [Understanding Success Criterion 1.1.1: Non-text Content](https://www.w3.org/WAI/WCAG22/Understanding/non-text-content.html)\n- SVG Accessibility API Mappings (working draft)\n- [WAI-ARIA Graphics Module](https://www.w3.org/TR/graphics-aria-1.0/)\n- [ARIA4: Using a WAI-ARIA role to expose the role of a user interface component](https://www.w3.org/WAI/WCAG22/Techniques/aria/ARIA4)\n- [ARIA6: Using aria-label to provide labels for objects](https://www.w3.org/WAI/WCAG22/Techniques/aria/ARIA6)\n- [ARIA10: Using aria-labelledby to provide a text alternative for non-text content](https://www.w3.org/WAI/WCAG22/Techniques/aria/ARIA10)"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This `svg` element has an explicit role of `img` and an accessible name from the `title` element that is not empty.', html: "<p>How many circles are there?</p>\n<svg xmlns=\"http://www.w3.org/2000/svg\" role=\"img\" width=\"100\" height=\"100\">\n\t<title>1 circle</title>\n\t<circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"yellow\"></circle>\n</svg>" }, { name: 'Passed Example 2', description: 'This `circle` element has an explicit role of `graphics-symbol` and an accessible name from the `aria-label` attribute that is not empty.', html: "<p>How many circles are there?</p>\n<svg xmlns=\"https://www.w3.org/2000/svg\">\n\t<circle\n\t\trole=\"graphics-symbol\"\n\t\tcx=\"50\"\n\t\tcy=\"50\"\n\t\tr=\"40\"\n\t\tstroke=\"green\"\n\t\tstroke-width=\"4\"\n\t\tfill=\"yellow\"\n\t\taria-label=\"1 circle\"\n\t></circle>\n</svg>" }, { name: 'Passed Example 3', description: 'This `svg` element has an explicit role of `graphics-document` and an accessible name from the `title` element that is not empty.', html: "<p>How many circles are there?</p>\n<svg xmlns=\"http://www.w3.org/2000/svg\" role=\"graphics-document\" width=\"100\" height=\"100\">\n\t<title>1 circle</title>\n\t<circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"yellow\"></circle>\n</svg>" }]
    failed: [{ name: 'Failed Example 1', description: 'This `svg` element has an explicit role of `img` but has an empty (`""`) accessible name.', html: "<p>How many circles are there?</p>\n<svg xmlns=\"http://www.w3.org/2000/svg\" role=\"img\">\n\t<circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"green\" stroke-width=\"4\" fill=\"yellow\"></circle>\n</svg>" }, { name: 'Failed Example 2', description: 'This `svg` element has an explicit role of `img`, is included in the accessibility tree, but it has an empty (`""`) accessible name because the `title` element is empty.', html: "<p>How many circles are there?</p>\n<svg xmlns=\"http://www.w3.org/2000/svg\" role=\"img\">\n\t<title></title>\n\t<circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"yellow\"></circle>\n</svg>" }, { name: 'Failed Example 3', description: 'This `circle` element has an explicit role of `graphics-symbol` but has an empty (`""`) accessible name.', html: "<p>How many circles are there?</p>\n<svg xmlns=\"http://www.w3.org/2000/svg\">\n\t<circle role=\"graphics-symbol\" cx=\"50\" cy=\"50\" r=\"40\" stroke=\"green\" stroke-width=\"4\" fill=\"yellow\"></circle>\n</svg>" }, { name: 'Failed Example 4', description: 'This `svg` element with an explicit role of `img` has an empty (`""`) accessible name. The SVG `text` element is not used in computing the accessible name.', html: "<p>How many circles are there?</p>\n<svg xmlns=\"http://www.w3.org/2000/svg\" role=\"img\" width=\"100\" height=\"100\">\n\t<circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"yellow\"></circle>\n\t<text x=\"50%\" y=\"50%\" dominant-baseline=\"middle\" text-anchor=\"middle\">\n\t\t1 circle\n\t</text>\n</svg>" }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: 'Neither the `svg` element nor the `circle` element has any of the three explicit roles of `img`, `graphics-document`, `graphics-symbol`.', html: "<svg xmlns=\"http://www.w3.org/2000/svg\">\n\t<circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"yellow\"></circle>\n</svg>" }, { name: 'Inapplicable Example 2', description: 'This `svg` element and its descendants are not included in the accessibility tree because of the `aria-hidden` attribute.', html: "<svg xmlns=\"http://www.w3.org/2000/svg\" role=\"img\" aria-hidden=\"true\">\n\t<circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"yellow\"></circle>\n</svg>" }, { name: 'Inapplicable Example 3', description: 'This `circle` element has an explicit role that is neither `img`, `graphics-document` nor `graphics-symbol`.', html: "<svg xmlns=\"http://www.w3.org/2000/svg\">\n\t<circle role=\"graphics-object\" cx=\"50\" cy=\"50\" r=\"40\" fill=\"yellow\"></circle>\n</svg>" }]
expectation: 'Each target element has an accessible name that is not empty.'
