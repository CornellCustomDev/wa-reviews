machine_name: invalid-form-field-value-36b590
id: 36b590
name: 'Error message describes invalid form field value'
metadata:
    id: 36b590
    name: 'Error message describes invalid form field value'
    rule_type: atomic
    description: "This rule checks that text error messages provided when the user completes a form field with invalid values or using an invalid format, identify the cause of the error or how to fix the error.\n"
    accessibility_requirements: { 'wcag20:3.3.1': { forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['DOM Tree', 'CSS Styling', Language]
    acknowledgments: { authors: ['Carlos Duarte', 'Jo√£o Vicente', 'Wilco Fiers'], funding: [WAI-Tools] }
applicability: "This rule applies to each HTML element that has one of the following semantic roles:\n\n- `checkbox`,\n- `combobox`,\n- `listbox`,\n- `menuitemcheckbox`,\n- `menuitemradio`,\n- `radio`,\n- `searchbox`,\n- `slider`,\n- `spinbutton`,\n- `switch` or\n- `textbox`."
assumptions: 'There are no assumptions.'
accessibility_support: 'There are no accessibility support issues known.'
background: "The list of applicable semantic roles is derived by taking all the ARIA 1.2 roles that:\n\n- inherit from the `input`, `menuitem` or `select` role, and\n- are form field controls (this notably excludes `menu`, `option` or `tree`).\n\nThis rule does not test form field error indicators shown on a different page than that of the test target.\n\nA single form field error indicator can be related to multiple test targets. For example, an error message at the top of a form can list all the form fields that are required and are empty.\n\nA single test target can be related to multiple form field error indicators. For example, a text field can have a red border around it, an error icon adjacent to it, an error message below it, and another error message at the top of the form. All of these are error indicators for the same form field.\n\n### Bibliography\n\n- [Understanding Success Criterion 3.3.1: Error Identification](https://www.w3.org/WAI/WCAG22/Understanding/error-identification)\n- [G84: Providing a text description when the user provides information that is not in the list of allowed values](https://www.w3.org/WAI/WCAG22/Techniques/general/G84)\n- [G85: Providing a text description when user input falls outside the required format or values](https://www.w3.org/WAI/WCAG22/Techniques/general/G85)"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This `input` element has a form field error indicator that identifies it (by referencing its label), describes the cause of the error and how to resolve it.', html: "<form>\n\t<label for=\"age\">Age (years)</label>\n\t<input type=\"number\" id=\"age\" aria-describedby=\"error\" value=\"0\" />\n\t<span id=\"error\">Invalid value for age. Age must be at least 1.</span><br />\n\t<input type=\"button\" value=\"Submit\" />\n</form>" }, { name: 'Passed Example 2', description: 'These multiple `input` elements share a form field error indicator that identifies the elements unfilled (by referencing their labels), describes the cause of the error and how to resolve it.', html: "<form>\n\t<p id=\"error\">\n\t\t<strong>\n\t\t\tName and color cannot be empty. Please complete all required fields.\n\t\t</strong>\n\t</p>\n\t<fieldset>\n\t\t<legend>Shipping</legend>\n\t\t<label for=\"name\">Name (required)</label>\n\t\t<input type=\"text\" id=\"name\" required />\n\t\t<br />\n\t\t<label for=\"address\">Address</label>\n\t\t<input type=\"text\" id=\"address\" />\n\t</fieldset>\n\t<fieldset>\n\t\t<legend>Pick a color (required)</legend>\n\t\t<label><input type=\"radio\" name=\"color\" value=\"blue\" required />Blue</label>\n\t\t<label><input type=\"radio\" name=\"color\" value=\"yellow\" />Yellow</label>\n\t</fieldset>\n\t<input type=\"button\" value=\"Submit\" aria-describedby=\"error\" />\n</form>" }, { name: 'Passed Example 3', description: 'This `input` element does not have a form field error indicator.', html: "<form>\n\t<label for=\"filter\">Product filter</label>\n\t<input type=\"text\" id=\"filter\" />\n\t<input type=\"button\" value=\"filter\" />\n\t<p>To see all products, leave the field empty.</p>\n</form>" }]
    failed: [{ name: 'Failed Example 1', description: 'These multiple `input` elements share a form field error indicator but its message does not identify the elements that caused the error nor describes the cause of the error.', html: "<form>\n\t<div id=\"error\">Please fill the field correctly.</div>\n\t<label for=\"age\">Age (years)</label>\n\t<input type=\"number\" id=\"age\" />\n\t<label for=\"name\">Name</label>\n\t<input type=\"text\" id=\"name\" />\n\t<input type=\"button\" value=\"Submit\" />\n</form>" }, { name: 'Failed Example 2', description: 'This `input` element has a form field error indicator but its message does not describe the cause of the error.', html: "<form>\n\t<label for=\"age\">Age (years)</label>\n\t<input type=\"number\" id=\"age\" />\n\t<span id=\"error\">Invalid value for age.</span><br />\n\t<input type=\"button\" value=\"Submit\" />\n</form>" }, { name: 'Failed Example 3', description: 'This `input` element has a form field error indicator that identifies it (by referencing its label) and describes the cause of the error but the message is not visible.', html: "<form>\n\t<label for=\"age\">Age (years)</label>\n\t<input type=\"number\" id=\"age\" value=\"0\" />\n\t<span id=\"error\" style=\"display: none;\">Invalid value for age. Age must be at least 1.</span><br />\n\t<input type=\"button\" value=\"Submit\" aria-describedby=\"error\" />\n</form>" }, { name: 'Failed Example 4', description: 'This `input` element has a form field error indicator that identifies it (by referencing its label) and describes the cause of the error but the message is not included in the accessibility tree.', html: "<form>\n\t<label for=\"age\">Age (years)</label>\n\t<input type=\"number\" id=\"age\" value=\"0\" />\n\t<span id=\"error\" aria-hidden=\"true\">Invalid value for age. Age must be at least 1.</span><br />\n\t<input type=\"button\" value=\"Submit\" />\n</form>" }, { name: 'Failed Example 5', description: 'These multiple `input` elements share a form field error indicator. The message describes the cause of the error but does not allow to identify the elements that caused the error because the same label is used in different `fieldset`s.', html: "<form>\n\t<fieldset>\n\t\t<legend>Shipping</legend>\n\t\t<label for=\"shippingName\">Name</label>\n\t\t<input type=\"text\" id=\"shippingName\" required />\n\t\t<label for=\"shippingAddress\">Address</label>\n\t\t<input type=\"text\" id=\"shippingAddress\" required />\n\t</fieldset>\n\t<fieldset>\n\t\t<legend>Billing</legend>\n\t\t<label for=\"billingName\">Name</label>\n\t\t<input type=\"text\" id=\"billingName\" />\n\t\t<label for=\"billingAddress\">Address</label>\n\t\t<input type=\"text\" id=\"billingAddress\" />\n\t</fieldset>\n\t<span id=\"error\">All required fields must be filled.<br />Please fill Name.<br />Please fill Address</span><br />\n\t<input type=\"button\" value=\"Submit\" />\n</form>" }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: 'There are no elements with any of the required semantic roles.', html: '<p>This is a paragraph.</p>' }]
expectation: "Each test target either has no form field error indicators, or at least one of the form field error indicators allows the identification of the related test target, through text, or through non-text content, or through presentation.Each test target either has no form field error indicators, or at least one of the form field error indicators describes:\n\n- the cause of the error, or\n- how to resolve it,\n\nin text that is visible.Each test target either has no form field error indicators, or at least one of the form field error indicators describes:\n\n- the cause of the error, or\n- how to resolve it,\n\nin text that is included in the accessibility tree or included in the accessible name or accessible description of the test target."
