machine_name: document-has-headings-for-non-repeated-content-047fe0
id: 047fe0
name: 'Document has heading for non-repeated content'
metadata:
    id: 047fe0
    name: 'Document has heading for non-repeated content'
    rule_type: atomic
    description: "This rule checks that the non-repeated content contains a heading\n"
    accessibility_requirements: { 'wcag-technique:H69': { forConformance: false, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['Accessibility Tree', 'CSS Styling', 'DOM Tree']
    acknowledgments: { authors: ['Jean-Yves Moyen'], funding: [WAI-Tools], assets: ['_The Three Kingdoms_ by Luo Guanzhong, translation by Yu Sumei (Tuttle publishing, 2014, ISBN 9780804843935)', 'Image from a Ming Dynasty edition of the Romance of the Three Kingdoms, original kept in the library holdings of Peking University.'] }
applicability: 'This rule applies to any HTML web page.'
assumptions: "- This rule assumes that headings used to pass Technique H69: Providing heading elements at the beginning of each section of content have to be included in the accessibility tree in order to be beneficial to users of assistive technologies.\n- This rule assumes that the first non-repeated content is starting a new section of content. If this is not the case, it is possible to fail the rule while still passing Technique H69: Providing heading elements at the beginning of each section of content."
accessibility_support: "- Having a heading for the non-repeated content is sufficient to pass Success Criterion 2.4.1 Bypass blocks. However, if headings are used for that goal, they will only benefit users who can actually navigate from heading to heading (such a functionality can be provided by browsers, browsers plugins, screen readers or other assistive technologies). Users without any possibility for headings navigation will be left without way of bypassing blocks of repeated content and will still experience accessibility issues. Therefore, it is recommended to provide other ways of bypassing blocks.\n- When headings are rendered without sufficient visual cues, they are not perceived as headings by sighted users. In this case, passing this rule might still fail Technique H69: Providing heading elements at the beginning of each section of content and Success Criterion 2.4.1 Bypass blocks. Additionally, this is likely a failure of Success Criterion 1.3.1 Info and Relationships."
background: "The intention of this rule is that the heading is at (or near) the start of the main area of content of a document. However, defining the main area of content in a non-ambiguous way is not really doable. Therefore, the rule takes a more lenient position and only requires the heading to be some non-repeated content. Additional conditions on this heading were considered and rejected when writing the rule since it might be acceptable, for example, to have non-repeated content such as breadcrumb before any heading. Therefore, it is possible to pass this rule but still fail H69: Providing heading elements at the beginning of each section of content and violate Success Criterion 2.4.1 Bypass blocks.\n\nNeither this rule, nor technique H69: Providing heading elements at the beginning of each section of content, expects the heading to accurately describe its corresponding section. However, having non descriptive headings fails [Success Criterion 2.4.6: Headings and Labels](https://www.w3.org/TR/WCAG22/#headings-and-labels)\n\n### Bibliography\n\n- Understanding Success Criterion 2.4.1: Bypass Blocks\n- H69: Providing heading elements at the beginning of each section of content\n- [CSS Scoping (work in progress)](https://drafts.csswg.org/css-scoping/)"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This document has a `h1` heading, which is visible and included in the accessibility tree, at the beginning of its non-repeated content.', html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<h1>Content</h1>\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<h1>Three Heroes Swear Brotherhood at a Feast in the Peach Garden</h1>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 2', description: 'This document has a `h2` heading, which is visible and included in the accessibility tree, at the beginning of its non-repeated content.', html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<h1>The Three Kingdoms, Chapter 1</h1>\n\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<h2>Content</h2>\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<h2>Three Heroes Swear Brotherhood at a Feast in the Peach Garden</h2>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 3', description: "This document has a `h1` heading, which is visible and included in the accessibility tree, at the beginning of its non-repeated content.\n\n**Note:** In this document, the non-repeated content starts after the `ol` element.", html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<!-- Navigational block of content starts here -->\n\t\t<h1>Content</h1>\n\t\t<ol>\n\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t</ol>\n\t\t<!-- Navigational block of content ends here -->\n\n\t\t<!-- Main block of content starts here -->\n\t\t<h1>Three Heroes Swear Brotherhood at a Feast in the Peach Garden</h1>\n\t\t<p>\n\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span of\n\t\t\ttime.\n\t\t</p>\n\t\t<!-- Main block of content ends here -->\n\t</body>\n</html>" }, { name: 'Passed Example 4', description: 'This document has a `h1` heading, which is visible and included in the accessibility tree, at the beginning of its non-repeated content. Here, the heading is the first non-repeated content after repeated content.', html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<h1>Content</h1>\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<hr />\n\t\t\t<h1>Three Heroes Swear Brotherhood at a Feast in the Peach Garden</h1>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 5', description: 'This document has a `h1` heading, which is visible and included in the accessibility tree, at the beginning of its non-repeated content.', html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<h1>Content</h1>\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<img src=\"/test-assets/bypass-blocks-cf77f2/peach-garden-oath.jpg\" alt=\"\" />\n\t\t\t<h1>Three Heroes Swear Brotherhood at a Feast in the Peach Garden</h1>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 6', description: 'This document has a `div` element with a role of `heading`, which is visible and included in the accessibility tree, at the beginning of its non-repeated content. Note that re-purposing an element instead of using native HTML is a violation of the [First Rule of ARIA Use](https://www.w3.org/TR/using-aria/#rule1) and should normally be avoided.', html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<div role=\"heading\" aria-level=\"1\">Contents</div>\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<div role=\"heading\" aria-level=\"1\">Three Heroes Swear Brotherhood at a Feast in the Peach Garden</div>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 7', description: 'This document has a `h1` heading, which is visible and included in the accessibility tree, at the beginning of its non-repeated content.', html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<h1>Content</h1>\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<h1>\n\t\t\t\t<img\n\t\t\t\t\tsrc=\"/test-assets/bypass-blocks-cf77f2/peach-garden-oath.jpg\"\n\t\t\t\t\talt=\"Three Heroes Swear Brotherhood at a Feast in the Peach Garden\"\n\t\t\t\t/>\n\t\t\t</h1>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 8', description: 'This document has a `h1` heading, which is visible and included in the accessibility tree, at the beginning of its non-repeated content.', html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<h1>Content</h1>\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<span>1.</span>\n\t\t\t<h1>Three Heroes Swear Brotherhood at a Feast in the Peach Garden</h1>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Passed Example 9', description: 'This document has no non-repeated content after repeated content.', html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span of\n\t\t\ttime.\n\t\t</p>\n\t</body>\n</html>" }]
    failed: [{ name: 'Failed Example 1', description: 'In this document, there is semantic `heading` element, even though the `strong` element is styled to appear as one.', html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<strong style=\"font-size: 18pt\">Three Heroes Swear Brotherhood at a Feast in the Peach Garden</strong>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Failed Example 2', description: 'The non-repeated content of this document starts with a `h1` heading, but it is not visible (because it is off-screen).', html: "<html>\n\t<head>\n\t\t<link rel=\"stylesheet\" href=\"/test-assets/bypass-blocks-cf77f2/styles.css\" />\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<h1 class=\"off-screen\">Three Heroes Swear Brotherhood at a Feast in the Peach Garden</h1>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Failed Example 3', description: 'The non-repeated content of this document starts with a `h1` heading, but it is not included in the accessibility tree (because of the `aria-hidden` attribute).', html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<h1 aria-hidden=\"true\">Three Heroes Swear Brotherhood at a Feast in the Peach Garden</h1>\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }, { name: 'Failed Example 4', description: "In this document, the only element with a role of `heading` is inside a block of repeated content and therefore isn't non-repeated content after repeated content.", html: "<html>\n\t<head>\n\t\t<title>The Three Kingdoms, Chapter 1</title>\n\t</head>\n\t<body>\n\t\t<nav id=\"chapters-navigation\">\n\t\t\t<h1>Content</h1>\n\t\t\t<ol>\n\t\t\t\t<li><a>Chapter 1</a></li>\n\t\t\t\t<li><a href=\"/test-assets/bypass-blocks-cf77f2/chapter2.html\">Chapter 2</a></li>\n\t\t\t</ol>\n\t\t</nav>\n\n\t\t<div id=\"main\">\n\t\t\t<p>\n\t\t\t\tUnity succeeds division and division follows unity. One is bound to be replaced by the other after a long span\n\t\t\t\tof time.\n\t\t\t</p>\n\t\t</div>\n\t</body>\n</html>" }]
expectation: "In each test target, either there is no non-repeated content after repeated content or there exists an element for which all the following are true:\n\n- the element is non-repeated content after repeated content; and\n- the element is a semantic `heading`; and\n- the element is visible; and\n- the element is included in the accessibility tree."
