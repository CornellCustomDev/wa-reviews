id: 674b10
name: 'Role attribute has valid value'
metadata:
    id: 674b10
    name: 'Role attribute has valid value'
    rule_type: atomic
    description: "This rule checks that each `role` attribute has a valid value.\n"
    accessibility_requirements: { 'wcag-technique:ARIA4': { forConformance: false, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' }, 'wcag-technique:G108': { forConformance: false, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' }, 'wcag20:1.3.1': { secondary: "This success criterion is **less strict** than this rule. This is because the success criterion can be satisfied by an element's implicit role when the explicit role is incorrect. Some of the failed examples may satisfy this success criterion." }, 'wcag20:4.1.2': { secondary: "This success criterion is **less strict** than this rule. This is because the success criterion can be satisfied by an element's implicit role when the explicit role is incorrect. Some of the failed examples may satisfy this success criterion." } }
    input_aspects: ['DOM Tree', 'CSS Styling']
    acknowledgments: { authors: ['Jey Nandakumar'], funding: [WAI-Tools] }
applicability: "This rule applies to any `role` attribute for which all the following are true:\n\n- the attribute has a value that is neither empty (\"\") nor only ASCII whitespace; and\n- the attribute is specified on an HTML or SVG element which is not programmatically hidden."
assumptions: 'There are no assumptions.'
accessibility_support: 'Older browsers do not support more than one token in the value for a role attribute. If multiple values are used in the role attribute, the attribute is ignored in these browsers.'
background: "Using an invalid role is often the result of a typo or other developer error. Unknown roles are ignored by browsers and assistive technologies, and the element's implicit role is used. This often means that a role that should exist is missing.\n\nThe `role` attribute is a set of space separated tokens. Having a whitespace](#whitespace) separated list of more than one token in the value of the role attribute is used for what is known as _fallback roles_. If the first token is not accessibility supported (or valid), the next one will be used for determining the [semantic role of the element, and so forth. The rule applies to attributes containing at least one non-ASCII whitespace character so that there is at least one token in the set.\n\nNot every role can be used on every element. Which ARIA roles may be used on which HTML elements is defined in [ARIA in HTML](https://www.w3.org/TR/html-aria/). Testing this is not part of this rule.\n\n### Bibliography\n\n- List of WAI-ARIA Roles\n- [List of Graphics ARIA Roles](https://www.w3.org/TR/graphics-aria-1.0/#role_definitions)\n- [List of DPUB ARIA Roles](https://www.w3.org/TR/dpub-aria-1.1/#role_definitions)\n- Specification of the `role` attribute\n- [WAI-ARIA 1.2 Categorization of Roles](https://www.w3.org/TR/wai-aria-1.2/#roles_categorization)\n- [WAI-ARIA Roles](https://www.w3.org/TR/wai-aria-1.2/#introroles)"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This `role` attribute contains one `searchbox` token which is a valid WAI-ARIA role.', html: '<label>Search: <input type="text" role="searchbox" placeholder="Enter 3 or more characters"/></label>' }, { name: 'Passed Example 2', description: 'This `role` attribute contains two tokens which are both valid WAI-ARIA roles.', html: "<style>\n\t.ref {\n\t\tcolor: #0000ee;\n\t\ttext-decoration: underline;\n\t\tcursor: pointer;\n\t}\n</style>\nSee [<span class=\"ref\" onclick=\"location.href='https://act-rules.github.io/'\" role=\"doc-biblioref link\">ACT rules</span\n>]." }, { name: 'Passed Example 3', description: 'This `role` attribute contains two tokens, and one of these tokens (`searchbox`) is a valid WAI-ARIA role.', html: '<label>Search: <input type="text" role="searchfield searchbox" placeholder="Enter 3 or more characters"/></label>' }]
    failed: [{ name: 'Failed Example 1', description: 'This `role` attribute contains one `lnik` token, but this token is not a valid role in any of the WAI-ARIA specifications.', html: "<style>\n\t.link {\n\t\tcolor: #0000ee;\n\t\ttext-decoration: underline;\n\t\tcursor: pointer;\n\t}\n</style>\nI love <span class=\"link\" onclick=\"location.href='https://act-rules.github.io/'\" role=\"lnik\">ACT rules</span>." }, { name: 'Failed Example 2', description: 'This `role` attribute contains two tokens, but neither of these tokens is a valid role in any of the WAI-ARIA specifications.', html: "<style>\n\t.ref {\n\t\tcolor: #0000ee;\n\t\ttext-decoration: underline;\n\t\tcursor: pointer;\n\t}\n</style>\nSee [<span class=\"ref\" onclick=\"location.href='https://act-rules.github.io/'\" role=\"bibliographic-reference lnik\"\n\t>ACT rules</span\n>]." }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: 'There is no `role` attribute.', html: '<img src="/test-assets/shared/w3c-logo.png" alt="W3C logo" />' }, { name: 'Inapplicable Example 2', description: 'This `role` attribute has no value.', html: '<div role>Some Content</div>' }, { name: 'Inapplicable Example 3', description: 'This `role` attribute is empty ("").', html: '<div role="">Some Content</div>' }, { name: 'Inapplicable Example 4', description: 'This `role` attribute is only ASCII whitespace.', html: '<input type="text" role=" " />' }, { name: 'Inapplicable Example 5', description: 'This `role` attribute is specified on an element which is programmatically hidden.', html: '<div aria-hidden="true" role="banner">Some Content</div>' }]
expectation: 'Each test target has at least one token which is a valid value corresponding to a non-abstract role from WAI-ARIA Specifications.'
