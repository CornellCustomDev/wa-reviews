machine_name: sequentially-focusable-element-has-visible-focus-oj04fd
id: oj04fd
name: 'Element in sequential focus order has visible focus'
metadata:
    id: oj04fd
    name: 'Element in sequential focus order has visible focus'
    rule_type: atomic
    description: "This rule checks that each element in sequential focus order has some visible focus indication.\n"
    accessibility_requirements: { 'wcag20:2.4.7': { forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['CSS styling', 'DOM tree']
    acknowledgments: { authors: ['Jean-Yves Moyen'], funding: [WAI-Tools] }
applicability: 'The rule applies to any element which is part of sequential focus navigation in an [HTML document](https://html.spec.whatwg.org/#document).'
assumptions: 'There are no assumptions.'
accessibility_support: 'There are no accessibility support issues known.'
background: "Default styling in user agents provides a focus indication for focusable elements (even those that are not focusable by default), as shown in Passed Examples 1 and 2. Many examples in this rule need to **remove** that indicator in order to illustrate various situations. This is bad practice and should normally be avoided.\n\nWCAG 2.0 and 2.1 do not have any requirement of how big or small focus indicator should be, or how far or near from the focusable element it should be. Thus it is possible to pass this rule and Success Criterion 2.4.7 Focus Visible with barely perceptible changes at the other end of the page. That would however still be an accessibility issue. WCAG 2.2 includes Success Criterion 2.4.11 Focus Appearance and Success Criterion 2.4.12 Focus Not Obscured (Minimum) specifying how big the focus indicator should be. All Passed Examples in this rule satisfy those success criteria.\n\nWCAG does not require that the focus indicator for each focusable element is unique in appearance. Therefore, this rule can pass even if several focus indicators are identical. Such a situation may nonetheless cause confusion and all examples in this rule avoid it.\n\n### Bibliography\n\n- Success Criterion 2.4.7 Focus Visible\n- Success Criterion 2.4.11 Focus Appearance\n- Success Criterion 2.4.12 Focus Not Obscured (Minimum)\n- Understanding Success Criterion 2.4.7: Focus Visible\n- Understanding Success Criterion 2.4.11: Focus Appearance\n- Understanding Success Criterion 2.4.12: Focus Not Obscured (Minimum)"
test_cases:
    passed: [{ name: 'Passed Example 1', description: "The focusable element is part of sequential focus navigation. It has an outline when it is focused (due to default User Agent's styling). The outline has a different `hsl` value compared to the `hsl` value of the background over which the outline appears (the exact values depend on the type of browser being used).", html: '<a href="https://act-rules.github.io/">ACT rules</a>' }, { name: 'Passed Example 2', description: "The focusable element is part of sequential focus navigation. It has an outline when it is focused (due to default User Agent's styling). The outline has a different `hsl` value compared to the `hsl` value of the background over which the outline appears (the exact values depend on the type of browser being used).", html: '<span tabindex="0">Act rules</span>' }, { name: 'Passed Example 3', description: "The focusable element is part of sequential focus navigation. Its parent `span` puts a border around it when it is focused (the border of the `span` element). The border's `hsl` value (`hsl(240, 100%, 25%)`) is different to the `hsl` value of the background (`hsl(0, 0%, 100%)`) over which the border appears.", html: "<link rel=\"stylesheet\" href=\"/test-assets/focus-visible-oj04fd/styles.css\" />\n<script src=\"/test-assets/focus-visible-oj04fd/script.js\"></script>\n\n<span id=\"indicator\" class=\"border\">\n\t<a\n\t\tid=\"act\"\n\t\tclass=\"no-focus-default\"\n\t\tonfocus=\"toggleActivation('indicator')\"\n\t\tonblur=\"toggleActivation('indicator')\"\n\t\thref=\"https://act-rules.github.io/\"\n\t\t>ACT rules</a\n\t>\n</span>" }, { name: 'Passed Example 4', description: "Each of these three focusable elements has a blue square in front of it when it is focused. The square's `hsl` value (`hsl(240, 100%, 25%)`) is different to the `hsl` value of the background (`hsl(0, 0%, 100%)`) over which the square appears.", html: "<link rel=\"stylesheet\" href=\"/test-assets/focus-visible-oj04fd/styles.css\" />\n<script src=\"/test-assets/focus-visible-oj04fd/script.js\"></script>\n\n<span id=\"indicator-act\" class=\"indicator solid\"></span>\n<a\n\tid=\"act\"\n\tclass=\"no-focus-default\"\n\tonfocus=\"toggleActivation('indicator-act'); toggleActivation('indicator-wcag')\"\n\tonblur=\"toggleActivation('indicator-act'); toggleActivation('indicator-wcag')\"\n\thref=\"https://act-rules.github.io/\"\n\t>ACT rules</a\n>\n<span id=\"indicator-wcag\" class=\"indicator solid\"></span>\n<a\n\tid=\"wcag\"\n\tclass=\"no-focus-default\"\n\tonfocus=\"toggleActivation('indicator-wcag'); toggleActivation('indicator-w3c')\"\n\tonblur=\"toggleActivation('indicator-wcag'); toggleActivation('indicator-w3c')\"\n\thref=\"https://www.w3.org/TR/WCAG22/\"\n\t>WCAG</a\n>\n<span id=\"indicator-w3c\" class=\"indicator solid\"></span>\n<a\n\tid=\"w3c\"\n\tclass=\"no-focus-default\"\n\tonfocus=\"toggleActivation('indicator-w3c'); toggleActivation('indicator-final')\"\n\tonblur=\"toggleActivation('indicator-w3c'); toggleActivation('indicator-final')\"\n\thref=\"https://www.w3.org/\"\n\t>WCAG</a\n>\n<span id=\"indicator-final\" class=\"indicator solid\"></span>" }]
    failed: [{ name: 'Failed Example 1', description: 'The focusable element does not have any pixel changing color when it is focused because the default styling has been overwritten by a style that removes the outline.', html: "<link rel=\"stylesheet\" href=\"/test-assets/focus-visible-oj04fd/styles.css\" />\n<a class=\"no-focus-default\" href=\"https://act-rules.github.io/\">ACT rules</a>" }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: 'This document contains no focusable element.', html: '<span>ACT rules</span>' }, { name: 'Inapplicable Example 2', description: 'None of the focusable elements in this document are part of sequential focus navigation.', html: "<a tabindex=\"-1\" href=\"https://act-rules.github.io/\">ACT rules</a>\n<a tabindex=\"-1\" href=\"https://www.w3.org/TR/WCAG22/\">WCAG</a>" }]
expectation: 'For each target element, there is at least one device pixel inside the scrolling area of the viewport whose HSL color value](https://www.w3.org/TR/css-color-3/#hsl-color) is different when the element is [focused from when it is not.'
