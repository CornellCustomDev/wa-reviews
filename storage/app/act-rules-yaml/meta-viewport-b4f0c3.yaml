id: b4f0c3
name: 'Meta viewport allows for zoom'
metadata:
    id: b4f0c3
    name: 'Meta viewport allows for zoom'
    rule_type: atomic
    description: "This rule checks that the `meta` element retains the user agent ability to zoom.\n"
    accessibility_requirements: { 'wcag20:1.4.4': { forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' }, 'wcag21:1.4.10': { secondary: 'This success criterion is **related** to this rule. This is because a page that cannot be zoomed up to 200% often does not reflow sufficiently either. Most failed examples satisfy this success criterion.' } }
    input_aspects: ['DOM Tree']
    acknowledgments: { authors: ['Jean-Yves Moyen'], previous_authors: ['Audrey Maniez', 'Jey Nandakumar'], funding: [WAI-Tools] }
applicability: "This rule applies to each `content` attribute for which all of the following are true:\n\n- the attribute is defined on a `meta` element with a `name` attribute value of `viewport`; and\n- the attribute value has at least one of the `maximum-scale` or `user-scalable` keys.\n\nFor the purpose of this rule, the attribute value of the `content` attribute is a list of key/value pairs."
assumptions: "Pages for which any of the following is true may satisfy Success Criteria 1.4.4 Resize text and 1.4.10 Reflow, even if the rule results in a failed outcome.\n\n- The page has no visible content; or\n- There is another [mechanism](https://www.w3.org/TR/WCAG22/#dfn-mechanism) available to resize the text content; or\n- The content does not need to reflow in order to fit in an area of 320 by 256 CSS pixels."
accessibility_support: "Desktop browsers ignore the viewport `meta` element, and most modern mobile browsers either ignore it by default or have an accessibility option which will allow zooming. This rule is not relevant for desktop browsers, nor for most modern mobile browsers. Only users with older mobile browsers can experience issues tested by this rule.\n\nThe exact way the `content` attribute should be parsed (notably, for error handling) is not fully specified. CSS specification includes a [non-normative parsing algorithm](https://www.w3.org/TR/css-device-adapt-1/#parsing-algorithm). Different user agents may behave differently in some cases."
background: "### Bibliography\n\n- [Understanding Success Criterion 1.4.4: Resize text](https://www.w3.org/WAI/WCAG22/Understanding/resize-text)\n- [Understanding Success Criterion 1.4.10: Reflow](https://www.w3.org/WAI/WCAG22/Understanding/reflow)\n- HTML Specification - The `meta` element\n- The initial-scale, minimum-scale, and maximum-scale properties\n- The user-scalable property"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This viewport `meta` element does not prevent user scaling because it has `user-scalable` set to `yes`.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"user-scalable=yes\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Passed Example 2', description: 'This viewport `meta` element does not prevent user scaling because it has `user-scalable` set to `5`.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"user-scalable=5\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Passed Example 3', description: 'This viewport `meta` element allows users to scale content up to 200% because it has `maximum-scale` set to 2.0.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"maximum-scale=2.0\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Passed Example 4', description: 'This viewport `meta` element does not prevent user scaling because it has `maximum-scale` set to -1, a negative value.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"maximum-scale=-1\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Passed Example 5', description: 'This viewport `meta` element does not prevent user scaling because it has `maximum-scale` set to `device-width`.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"maximum-scale=device-width\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }]
    failed: [{ name: 'Failed Example 1', description: 'This viewport `meta` element prevents user scaling because it has `user-scalable` set to `no`.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"user-scalable=no\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Failed Example 2', description: 'This viewport `meta` element prevents user scaling because it has `user-scalable` set to `0.5`.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"user-scalable=0.5\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Failed Example 3', description: 'This viewport `meta` element prevents user scaling because it has `user-scalable` set to `invalid`.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"user-scalable=invalid\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Failed Example 4', description: 'This viewport `meta` element prevents users to scale content up to 200% because it has `maximum-scale` set to 1.5.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"user-scalable=yes, initial-scale=0.8, maximum-scale=1.5\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Failed Example 5', description: 'This viewport `meta` element prevents users to scale content up to 200% because it has `maximum-scale` set to `yes`.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"maximum-scale=yes\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Failed Example 6', description: 'This viewport `meta` element prevents users to scale content up to 200% because it has `maximum-scale` set to `yes`.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"maximum-scale=yes\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Failed Example 7', description: 'This viewport `meta` element prevents users to scale content up to 200% because it has `maximum-scale` set to `invalid`.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"maximum-scale=invalid\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: 'There is no viewport `meta` element.', html: "<html>\n\t<head>\n\t\t<title>Lorem ipsum</title>\n\t\t<meta charset=\"UTF-8\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Inapplicable Example 2', description: 'This viewport `meta` element does not have a `content` attribute.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Inapplicable Example 3', description: 'This viewport `meta` element does not specify the `maximum-scale` nor `user-scalable` values.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"width=device-width\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }, { name: 'Inapplicable Example 4', description: 'This viewport `meta` element does not prevent user scaling because it does not specify the `maximum-scale` nor `user-scalable` values.', html: "<html>\n\t<head>\n\t\t<title>Simple page showing random text</title>\n\t\t<meta name=\"viewport\" content=\"\" />\n\t</head>\n\t<body>\n\t\t<p>\n\t\t\tLorem ipsum\n\t\t</p>\n\t</body>\n</html>" }]
expectation: "For each test target's attribute value, at least one of the following is true:\n\n- `user-scalable` is not defined; or\n- `user-scalable` is `yes`, `device-width` or `device-height`; or\n- `user-scalable` is a number which is not between -1 and 1 (excluded).\n\n**Note:** This is equivalent to applying the translations into a `@viewport` descriptors and not obtaining a value of `fixed` for the `user-zoom` descriptor from [the translation for `user-scalable`](https://www.w3.org/TR/css-device-adapt-1/#user-scalable).For each test target's attribute value, at least one of the following is true:\n\n- `maximum-scale` is not defined; or\n- `maximum-scale` is `device-width` or `device-height`; or\n- `maximum-scale` is a negative number; or\n- `maximum-scale` is a number which is 2 or more.\n\n**Note:** This is equivalent to applying the translations into a `@viewport` descriptors and not obtaining a value smaller than 2 for the `max-zoom` descriptor from [the translation for `maximum-scale`](https://www.w3.org/TR/css-device-adapt-1/#min-scale-max-scale)."
