machine_name: zoom-text-no-overflow-clipping-59br37
id: 59br37
name: 'Zoomed text node is not clipped with CSS overflow'
metadata:
    id: 59br37
    name: 'Zoomed text node is not clipped with CSS overflow'
    rule_type: atomic
    description: "This rule checks that text nodes are not unintentionally clipped by overflow, when a page is zoomed to 200% on 1280 by 1024 viewport;\n"
    accessibility_requirements: { 'wcag20:1.4.4': { forConformance: true, failed: 'not satisfied', passed: 'further testing needed', inapplicable: 'further testing needed' } }
    input_aspects: ['DOM Tree', 'CSS Styling']
    acknowledgments: { authors: ['Wilco Fiers'], funding: [WAI-Tools], assets: ['The Raven, poem by Edgar Allan Poe'] }
applicability: "This rule applies to any text node for which all of the following is true when in a viewport size of 640 by 512:\n\n- The text node is visible; and\n- The text node has an HTML element as a parent in the flat tree; and\n- The text node has an ancestor in the flat tree with a computed overflow-x or overflow-y of `hidden` or `clip`; and\n- The text node does not have an ancestor in the flat tree with an `aria-hidden` attribute value of `true`.\n\n**Note**: A viewport size of 640 by 512 is equivalent to a viewport size of 1280 by 1024 zoomed 200%."
assumptions: "If any of the following assumptions is true, failing this rule may not result in a failure of [success criterion 1.4.4 Resize text](https://www.w3.org/TR/WCAG22/#resize-text):\n\n- There is no other mechanism for resizing text available on the page, that can be used to resize text to 200% without loss of information or functionality. This includes font resizing in the browser, or a javascript mechanism of resizing in the page.\n\n- Text nodes can not be horizontally or vertically clipped by overflow without loss of information, except for text nodes with an ancestor with `aria-hidden` set to `true`, or when specific styles have been applied to ensure text is clipped cleanly (text-overflow, line wrapping or hidden text).\n\n- While success criterion 1.4.4 Resize text](https://www.w3.org/TR/WCAG22/#resize-text) does not explicitly mention which viewport size has to be resized up to 200%, it is assumed that a [viewport size of 1280 by 1024 is applicable. A 1280 by 1024 viewport size is explicitly mentioned under [success criterion 1.4.10 Reflow](https://www.w3.org/TR/WCAG22/#reflow)."
accessibility_support: 'Some user agents treat the value of the `aria-hidden` attribute as case-sensitive.'
background: "When the computed value of the `line-height` property is `normal`, the used value depends on font specific metrics. CSS specifications recommend that the used value is between 1.0 and 1.2 and major browsers are effectively using values close to 1.2.\n\n### Bibliography\n\n- [Understanding Success Criterion 1.4.4: Resize text](https://www.w3.org/WAI/WCAG22/Understanding/resize-text.html)\n- [G42: Using a technology that has commonly-available user agents that support zoom](https://www.w3.org/WAI/WCAG22/Techniques/general/G142)"
test_cases:
    passed: [{ name: 'Passed Example 1', description: 'This text node is fully visible at a viewport size of 640 by 512.', html: "<div style=\"white-space: nowrap; overflow: hidden; font-size: 16px;\">\n\tOnce upon a midnight dreary, while I pondered, weak and weary,<br />\n\tOver many a quaint and curious volume of forgotten lore.<br />\n\tWhile I nodded, nearly napping, suddenly there came a tapping,<br />\n\tAs of some one gently rapping, rapping at my chamber door.<br />\n\t“’Tis some visitor,” I muttered, “tapping at my chamber door.<br />\n\tOnly this and nothing more.”\n</div>" }, { name: 'Passed Example 2', description: 'This text node is horizontally clipped using `text-overflow: ellipsis` at a viewport size of 640 by 512. A link to a full version of the poem is also provided.', html: "<div style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 16px;\">\n\tOnce upon a midnight dreary, while I pondered, weak and weary, Over many a quaint and curious volume of forgotten\n\tlore. While I nodded, nearly napping, suddenly there came a tapping.\n</div>\n<a href=\"/test-assets/59br37/poem.html\">Full text of the poem</a>" }, { name: 'Passed Example 3', description: 'This text node is restricted to a single line, by setting a `line-height` that is the same as the `height`. A link to a full version of the poem is also provided.', html: "<style>\n\t.wordClip {\n\t\toverflow: hidden;\n\t\tword-wrap: break-word;\n\t\theight: 16px;\n\t\tline-height: 16px;\n\t\tfont-size: 16px;\n\t}\n</style>\n<div class=\"wordClip\">\n\tOnce upon a midnight dreary, while I pondered, weak and weary, Over many a quaint and curious volume of forgotten\n\tlore. While I nodded, nearly napping, suddenly there came a tapping.\n</div>\n<a href=\"/test-assets/59br37/poem.html\">Full text of the poem</a>" }, { name: 'Passed Example 4', description: 'This text node is not vertically clipped with `overflow: hidden` because it has a parent with `overflow: auto` at a viewport size of 640 by 512.', html: "<div style=\"overflow: hidden; height: 2em; font-size: 16px;\">\n\t<div style=\"overflow: auto; height: 2em;\">\n\t\tOnce upon a midnight dreary, while I pondered, weak and weary, Over many a quaint and curious volume of forgotten\n\t\tlore. While I nodded, nearly napping, suddenly there came a tapping.\n\t</div>\n</div>" }]
    failed: [{ name: 'Failed Example 1', description: 'This text node is vertically clipped because it has a fixed height that does not leave enough space for the content to wrap.', html: "<div style=\"overflow: hidden; height: 1.5em; font-size: 16px;\">\n\tOnce upon a midnight dreary, while I pondered, weak and weary, Over many a quaint and curious volume of forgotten\n\tlore. While I nodded, nearly napping, suddenly there came a tapping.\n</div>" }, { name: 'Failed Example 2', description: 'This text node is vertically clipped because its height is relative to the viewport height, leaving insufficient space for the page to be zoomed to 200% at a viewport size of 1280 by 1024.', html: "<div style=\"overflow: hidden; height: 16vh; font-size: 16px;\">\n\tOnce upon a midnight dreary, while I pondered, weak and weary,<br />\n\tOver many a quaint and curious volume of forgotten lore.<br />\n\tWhile I nodded, nearly napping, suddenly there came a tapping,<br />\n\tAs of some one gently rapping, rapping at my chamber door.<br />\n\t“’Tis some visitor,” I muttered, “tapping at my chamber door.<br />\n\tOnly this and nothing more.”\n</div>" }, { name: 'Failed Example 3', description: 'This text node is vertically clipped by style that is applied at a viewport size width of 640.', html: "<style>\n\t@media screen and (max-width: 640px) {\n\t\t.myContainer {\n\t\t\theight: 1.5em;\n\t\t\twidth: 50%;\n\t\t\toverflow: hidden;\n\t\t\tfont-size: 16px;\n\t\t}\n\t}\n</style>\n<div class=\"myContainer\">\n\tOnce upon a midnight dreary, while I pondered, weak and weary, Over many a quaint and curious volume of forgotten\n\tlore. While I nodded, nearly napping, suddenly there came a tapping, As of some one gently rapping, rapping at my\n\tchamber door. “’Tis some visitor,” I muttered, “tapping at my chamber door. Only this and nothing more.”\n</div>" }, { name: 'Failed Example 4', description: 'This text node is vertically clipped at a viewport size of 640 by 512.', html: "<div style=\"overflow-y: hidden; height: 10px; white-space: nowrap; text-overflow: ellipsis; font-size: 16px;\">\n\tOnce upon a midnight dreary, while I pondered, weak and weary, Over many a quaint and curious volume of forgotten\n\tlore. While I nodded, nearly napping, suddenly there came a tapping.\n</div>" }, { name: 'Failed Example 5', description: 'This text node is horizontally clipped at a viewport size of 640 by 512.', html: "<style>\n\t.wordClip {\n\t\toverflow-x: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: clip;\n\t\twidth: 50px;\n\t\theight: 16px;\n\t\tline-height: 16px;\n\t\tfont-size: 16px;\n\t}\n</style>\n<div class=\"wordClip\">\n\tOnce upon a midnight dreary, while I pondered, weak and weary, Over many a quaint and curious volume of forgotten\n\tlore. While I nodded, nearly napping, suddenly there came a tapping.\n</div>" }]
    inapplicable: [{ name: 'Inapplicable Example 1', description: 'This text node is not visible at a viewport size of 640 by 512.', html: '<p style="display:none;">Last updated 2020/03/27 10:52pm</p>' }, { name: 'Inapplicable Example 2', description: 'This text node has an SVG element as a parent.', html: "<svg>\n\t<text x=\"0\" y=\"15\">I love SVG!</text>\n</svg>" }, { name: 'Inapplicable Example 3', description: 'This text node has no ancestor with `overflow: hidden` or `clip`.', html: "<div style=\"overflow: auto; height: 1.5em; font-size: 16px;\">\n\tOnce upon a midnight dreary, while I pondered, weak and weary, Over many a quaint and curious volume of forgotten\n\tlore. While I nodded, nearly napping, suddenly there came a tapping.\n</div>" }, { name: 'Inapplicable Example 4', description: 'This text node has an ancestor with `aria-hidden` set to `true`.', html: '<img src="/test-assets/shared/w3c-logo.png" alt="W3C logo" /> <span aria-hidden="true">(W3C Logo)</span>' }, { name: 'Inapplicable Example 5', description: 'This text node with the text "Web Content Accessibility Guidelines 2.1" is fully hidden in a viewport size of 640 by 512.', html: "<style>\n\t@media screen and (max-width: 640px) {\n\t\t.mobile-hidden {\n\t\t\tposition: absolute;\n\t\t\twidth: 1px;\n\t\t\theight: 1px;\n\t\t\toverflow: hidden;\n\t\t\tfont-size: 16px;\n\t\t}\n\t}\n</style>\n<a href=\"/\"> Next<span class=\"mobile-hidden\">: Web Content Accessibility Guidelines 2.1</span> </a>" }]
expectation: 'Each test target is not horizontally clipped by overflow of an ancestor in the flat tree when in a viewport size of 640 by 512, except if the clipping ancestor has a computed white-space of `nowrap`, and a computed text-overflow that is not `clip`Each test target is not vertically clipped by overflow of an ancestor in the flat tree when in a viewport size of 640 by 512, except if the clipping ancestor has a used line-height equal to or greater than the height of its bounding box, or in case of a computed overflow-y of `clip`, its content box.'
